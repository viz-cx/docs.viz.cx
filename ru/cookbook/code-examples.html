<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ | VIZ</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/ios-appicon-152-152.png">
    <meta name="description" content="–ë–ª–æ–∫—á–µ–π–Ω VIZ">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/android-launchericon-144-144.png">
    <meta name="msapplication-TileColor" content="#3eaf7c">
    
    <link rel="preload" href="/assets/css/0.styles.738122f3.css" as="style"><link rel="preload" href="/assets/js/app.b39bded2.js" as="script"><link rel="preload" href="/assets/js/2.5ba55769.js" as="script"><link rel="preload" href="/assets/js/21.0dfe603c.js" as="script"><link rel="preload" href="/assets/js/3.eb6b60a6.js" as="script"><link rel="prefetch" href="/assets/js/10.c24707df.js"><link rel="prefetch" href="/assets/js/11.23bccd07.js"><link rel="prefetch" href="/assets/js/12.142dca8d.js"><link rel="prefetch" href="/assets/js/13.5dcd2c0b.js"><link rel="prefetch" href="/assets/js/14.a1f35fc0.js"><link rel="prefetch" href="/assets/js/15.08b53a29.js"><link rel="prefetch" href="/assets/js/16.e17d5773.js"><link rel="prefetch" href="/assets/js/17.b1754228.js"><link rel="prefetch" href="/assets/js/18.6cc65b07.js"><link rel="prefetch" href="/assets/js/19.84ace823.js"><link rel="prefetch" href="/assets/js/20.200f3bc5.js"><link rel="prefetch" href="/assets/js/22.bd560a9e.js"><link rel="prefetch" href="/assets/js/23.c2f89be8.js"><link rel="prefetch" href="/assets/js/24.0087319d.js"><link rel="prefetch" href="/assets/js/25.b54a8576.js"><link rel="prefetch" href="/assets/js/26.7716133d.js"><link rel="prefetch" href="/assets/js/27.79dd78f1.js"><link rel="prefetch" href="/assets/js/28.900b71f4.js"><link rel="prefetch" href="/assets/js/29.a7be1b6c.js"><link rel="prefetch" href="/assets/js/30.9670a848.js"><link rel="prefetch" href="/assets/js/31.700b18a0.js"><link rel="prefetch" href="/assets/js/32.ad18f75e.js"><link rel="prefetch" href="/assets/js/33.aa7a9639.js"><link rel="prefetch" href="/assets/js/34.2957158f.js"><link rel="prefetch" href="/assets/js/35.de13f76c.js"><link rel="prefetch" href="/assets/js/36.e4334454.js"><link rel="prefetch" href="/assets/js/37.cdb373b7.js"><link rel="prefetch" href="/assets/js/38.23498cd5.js"><link rel="prefetch" href="/assets/js/4.f66fdf58.js"><link rel="prefetch" href="/assets/js/5.934014ca.js"><link rel="prefetch" href="/assets/js/6.8d699738.js"><link rel="prefetch" href="/assets/js/7.0e3b8f7f.js"><link rel="prefetch" href="/assets/js/8.b7f3d1be.js"><link rel="prefetch" href="/assets/js/9.249ed28f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.738122f3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ru/" class="home-link router-link-active"><img src="/logo.png" alt="VIZ" class="logo"> <span class="site-name can-hide">VIZ</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ru/cookbook/basic-concept.html" class="nav-link">
  –†–µ—Ü–µ–ø—Ç—ã
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="–í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫" class="dropdown-title"><span class="title">–Ø–∑—ã–∫–∏</span> <span class="arrow down"></span></button> <button type="button" aria-label="–í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫" class="mobile-dropdown-title"><span class="title">–Ø–∑—ã–∫–∏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  üá∫üá∏English
</a></li><li class="dropdown-item"><!----> <a href="/ru/cookbook/code-examples.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  üá∑üá∫–†—É—Å—Å–∫–∏–π
</a></li></ul></div></div> <a href="https://github.com/viz-cx/docs.viz.cx" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ru/cookbook/basic-concept.html" class="nav-link">
  –†–µ—Ü–µ–ø—Ç—ã
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="–í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫" class="dropdown-title"><span class="title">–Ø–∑—ã–∫–∏</span> <span class="arrow down"></span></button> <button type="button" aria-label="–í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫" class="mobile-dropdown-title"><span class="title">–Ø–∑—ã–∫–∏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  üá∫üá∏English
</a></li><li class="dropdown-item"><!----> <a href="/ru/cookbook/code-examples.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  üá∑üá∫–†—É—Å—Å–∫–∏–π
</a></li></ul></div></div> <a href="https://github.com/viz-cx/docs.viz.cx" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>–ü–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –∫–Ω–∏–≥–∞</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ru/cookbook/basic-concept.html" class="sidebar-link">–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è</a></li><li><a href="/ru/cookbook/economy.html" class="sidebar-link">–≠–∫–æ–Ω–æ–º–∏–∫–∞</a></li><li><a href="/ru/cookbook/node-types.html" class="sidebar-link">–¢–∏–ø—ã –Ω–æ–¥</a></li><li><a href="/ru/cookbook/operations.html" class="sidebar-link">–û–ø–µ—Ä–∞—Ü–∏–∏ –∏ –∏—Ö —Ç–∏–ø—ã</a></li><li><a href="/ru/cookbook/object-structures.html" class="sidebar-link">–û–±—ä–µ–∫—Ç—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ VIZ</a></li><li><a href="/ru/cookbook/state.html" class="sidebar-link">–°–æ—Å—Ç–æ—è–Ω–∏–µ (—Å—Ç—ç–π—Ç) —Å–∏—Å—Ç–µ–º—ã</a></li><li><a href="/ru/cookbook/plugins-api.html" class="sidebar-link">–ü–ª–∞–≥–∏–Ω—ã –∏ –∏—Ö API</a></li><li><a href="/ru/cookbook/libraries.html" class="sidebar-link">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å VIZ</a></li><li><a href="/ru/cookbook/code-examples.html" aria-current="page" class="active sidebar-link">–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ru/cookbook/code-examples.html#viz-js-lib" class="sidebar-link">viz-js-lib</a></li><li class="sidebar-sub-header"><a href="/ru/cookbook/code-examples.html#–ø–æ–¥–ø–∏—Å—å-–¥–∞–Ω–Ω—ã—Ö-—Å-–ø–æ–º–æ—â—å—é-–ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ-–∫–ª—é—á–∞-–∏-–ø—Ä–æ–≤–µ—Ä–∫–∞-–ø–æ–¥–ø–∏—Å–∏-—Å-–ø–æ–º–æ—â—å—é-–ø—É–±–ª–∏—á–Ω–æ–≥–æ" class="sidebar-link">–ü–æ–¥–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ —Å –ø–æ–º–æ—â—å—é –ø—É–±–ª–∏—á–Ω–æ–≥–æ</a></li><li class="sidebar-sub-header"><a href="/ru/cookbook/code-examples.html#js-–∑–∞–ø—Ä–æ—Å—ã-–∫-–ø—É–±–ª–∏—á–Ω–æ–∏-–Ω–æ–¥–µ-viz-–±–µ–∑-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏" class="sidebar-link">js –∑–∞–ø—Ä–æ—Å—ã –∫ –ø—É–±–ª–∏—á–Ω–æ–π –Ω–æ–¥–µ VIZ –±–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏</a></li></ul></li><li><a href="/ru/cookbook/transaction-formatting.html" class="sidebar-link">–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–¥–∞"><a href="#–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–¥–∞" class="header-anchor">#</a> –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞</h1> <p>–ù–∞—á–∏–Ω–∞—é—â–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –≤—Å–µ–≥–¥–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—á–µ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ —Ç–æ–π –∏–ª–∏ –∏–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –∫–∞–∫ –ø–æ–Ω—è—Ç—å —Ä–∞–±–æ—Ç—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Ç–∞–∫ –∏ –∑–∞–ø–æ–º–Ω–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –í –¥–∞–Ω–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ –æ–ø–∏—Å–∞–Ω—ã –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –≤–∏–¥–µ –ø—Ä–∏–º–µ—Ä–æ–≤. –ù–∞–∏–±–æ–ª–µ–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π VIZ ‚Äî <a href="https://github.com/VIZ-Blockchain/viz-js-lib" target="_blank" rel="noopener noreferrer">viz-js-lib<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏–º–µ—Ä—ã –±—É–¥—É—Ç —Å –µ—ë –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º.</p> <hr> <h2 id="viz-js-lib"><a href="#viz-js-lib" class="header-anchor">#</a> viz-js-lib</h2> <p>–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –∏ –∏—Ö –∞—Ç—Ç—Ä–∏–±—É—Ç–æ–≤ <a href="https://github.com/VIZ-Blockchain/viz-js-lib/tree/master/doc" target="_blank" rel="noopener noreferrer">–¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ —Å—Å—ã–ª–∫–µ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏"><a href="#–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏" class="header-anchor">#</a> –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏</h3> <p>–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ (nodejs) –∏–ª–∏ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ (js) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫—É –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏.</p> <p>–î–ª—è nodejs –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —á–µ—Ä–µ–∑ <code>npm install viz-js-lib --save</code> –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –µ—ë –≤ js —Ñ–∞–π–ª–µ —á–µ—Ä–µ–∑ <code>var viz = require('viz-js-lib');</code>.</p> <p>–î–ª—è js –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –ª–∏–±–æ —Å–∞–º–æ–º—É —Å–æ–±—Ä–∞—Ç—å webpack –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å <code>npm build</code>, –ª–∏–±–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —É–∂–µ —Å–æ–±—Ä–∞–Ω–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –æ—Ç <a href="https://cdn.jsdelivr.net/npm/viz-js-lib@latest/dist/viz.min.js" target="_blank" rel="noopener noreferrer">jsDelivr CND<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> –∏–ª–∏ <a href="https://unpkg.com/viz-js-lib@0.9.21/dist/viz.min.js" target="_blank" rel="noopener noreferrer">Unpkg CDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å—Ç–µ –∫ html —Ñ–∞–π–ª—É —Ç—ç–≥ script –∏ —É–∫–∞–∂–∏—Ç–µ url –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: <code>&lt;script type=&quot;text/javascript&quot; src=&quot;https://cdn.jsdelivr.net/npm/viz-js-lib@latest/dist/viz.min.js&quot;&gt;&lt;/script&gt;</code>, –ø–æ—Å–ª–µ —á–µ–≥–æ —É –≤–∞—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –∫ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π <code>viz</code>.</p> <h3 id="–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–ø—É–±–ª–∏—á–Ω–æ–∏-–Ω–æ–¥—ã"><a href="#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–ø—É–±–ª–∏—á–Ω–æ–∏-–Ω–æ–¥—ã" class="header-anchor">#</a> –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–π –Ω–æ–¥—ã</h3> <p>–ü–æ–∫–∞ —É –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ—Ç –±–æ–ª—å—à–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ä–∞–∑—É–º–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—É—é –ø—É–±–ª–∏—á–Ω—É—é –Ω–æ–¥—É. –ù–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏ –≤ VIZ –¥–æ—Å—Ç—É–ø–Ω–æ –¥–≤–µ –ø—É–±–ª–∏—á–Ω—ã–µ –Ω–æ–¥—ã:</p> <ul><li>–ü—É–±–ª–∏—á–Ω–∞—è –Ω–æ–¥–∞ –æ—Ç –¥–µ–ª–µ–≥–∞—Ç–∞ lex: <code>https://viz.lexa.host/</code> –¥–ª—è JSON-RPC –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ HTTPS –∏ <code>wss://viz.lexa.host/ws</code> –¥–ª—è JSON-RPC –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ WebSocket over SSL;</li> <li>–ü—É–±–ª–∏—á–Ω–∞—è –Ω–æ–¥–∞ –æ—Ç –¥–µ–ª–µ–≥–∞—Ç–∞ solox: <code>https://solox.world/</code> –¥–ª—è JSON-RPC –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ HTTPS –∏ <code>wss://solox.world/ws</code> –¥–ª—è JSON-RPC –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ WebSocket over SSL.</li></ul> <p>–ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ viz –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–¥–æ–π <code>https://viz.lexa.host/</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> api_gate<span class="token operator">=</span><span class="token string">'https://viz.lexa.host/'</span><span class="token punctuation">;</span>
viz<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'websocket'</span><span class="token punctuation">,</span>api_gate<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="api-–∑–∞–ø—Ä–æ—Å—ã"><a href="#api-–∑–∞–ø—Ä–æ—Å—ã" class="header-anchor">#</a> API-–∑–∞–ø—Ä–æ—Å—ã</h3> <p>–í —Ä–∞–∑–¥–µ–ª–µ <a href="/ru/cookbook/plugins-api.html">–ü–ª–∞–≥–∏–Ω—ã –∏ –∏—Ö API</a> –±—ã–ª–∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã –∏ –∑–∞–ø—Ä–æ—Å—ã –∫ –Ω–∏–º ‚Äî –≤—Å–µ –æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ viz-js-lib. –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–æ—Ç –∏–ª–∏ –∏–Ω–æ–π –∑–∞–ø—Ä–æ—Å, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ <a href="https://ru.wikipedia.org/wiki/CamelCase" target="_blank" rel="noopener noreferrer">CamelCase<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤—ã —Ä–µ—à–∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å get_database_info –∫ –ø–ª–∞–≥–∏–Ω—É database_api, —Ç–æ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–¥:</p> <div class="language-js extra-class"><pre class="language-js"><code>viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getDatabaseInfo</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//–ø–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token comment">//–æ—à–∏–±–∫–∞</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —Ç—Ä–µ–±—É–µ—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —Ç–æ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –∏—Ö –≤ –Ω–∞—á–∞–ª–æ –≤—ã–∑–æ–≤–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ get_active_paid_subscriptions –∫ –ø–ª–∞–≥–∏–Ω—É paid_subscription_api, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω –ø–æ–∏—Å–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> subscriber<span class="token operator">=</span><span class="token string">'on1x'</span><span class="token punctuation">;</span>
viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getActivePaidSubscriptions</span><span class="token punctuation">(</span>subscriber<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//–ø–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token comment">//–æ—à–∏–±–∫–∞</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="—Ç—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞–Ω–∏–µ-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏-broadcast"><a href="#—Ç—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞–Ω–∏–µ-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏-broadcast" class="header-anchor">#</a> –¢—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (broadcast)</h3> <p>–î–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ VIZ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ viz-js-lib, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–¥–ª—è –ø–æ–¥–ø–∏—Å–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏) –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø–µ—Ä–∞—Ü–∏–∏. –ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ API –º–µ—Ç–æ–¥–∞–º, –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –≤ <a href="https://ru.wikipedia.org/wiki/CamelCase" target="_blank" rel="noopener noreferrer">—Ñ–æ—Ä–º–∞—Ç CamelCase<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ (broadcast) –æ–ø–µ—Ä–∞—Ü–∏–∏ account_metadata (–∑–∞–ø–∏—Å—å –≤ –±–ª–æ–∫—á–µ–π–Ω –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–∞):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regular_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> user_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span><span class="token comment">//–ª–æ–≥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç–∞</span>
<span class="token keyword">var</span> metadata<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string-property property">'name'</span><span class="token operator">:</span><span class="token string">'–¢–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç'</span><span class="token punctuation">,</span><span class="token string-property property">'photo'</span><span class="token operator">:</span><span class="token string">'https://cdn.pixabay.com/photo/2015/12/06/14/14/tokyo-1079524_960_720.jpg'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">accountMetadata</span><span class="token punctuation">(</span>regular_key<span class="token punctuation">,</span>user_login<span class="token punctuation">,</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø—Ä–∏–Ω—è—Ç–∞ –ø—É–±–ª–∏—á–Ω–æ–π –Ω–æ–¥–æ–π</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token comment">//–Ω–æ–¥–∞ –Ω–µ –ø—Ä–∏–Ω—è–ª–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ-–≥–ª–æ–±–∞–ª—å–Ω—ã–µ-—Å–≤–æ–∏—Å—Ç–≤–∞-—Å–µ—Ç–∏"><a href="#–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ-–≥–ª–æ–±–∞–ª—å–Ω—ã–µ-—Å–≤–æ–∏—Å—Ç–≤–∞-—Å–µ—Ç–∏" class="header-anchor">#</a> –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Å–µ—Ç–∏</h3> <p>–ß–∞—Å—Ç—å –Ω–æ–≤–∏—á–∫–æ–≤ —Ö–æ—Ç—è—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å –Ω–æ–¥—É –∏ –ø–æ–ª—É—á–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ DGP (Dynamic Global Properties), —á—Ç–æ–±—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–≥–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ –±–ª–æ–∫–∏, –∏—Å–ø–æ–ª–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è –ø–æ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ–º—É –±–ª–æ–∫—É –∏–ª–∏ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å –≤ —Å–ø–∏—Å–∫–µ –¥–µ–ª–µ–≥–∞—Ç–æ–≤ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ, –∫—Ç–æ –ø–æ–¥–ø–∏—Å–∞–ª –±–ª–æ–∫. –î–ª—è —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ —Ç–∞–π–º–µ—Ä—É –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã (–≤—Ä–µ–º—è –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> dgp<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">update_dgp</span><span class="token punctuation">(</span><span class="token parameter">auto<span class="token operator">=</span><span class="token boolean">false</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getDynamicGlobalProperties</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
			dgp<span class="token operator">=</span>response<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>auto<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token string">&quot;update_dgp(true)&quot;</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">update_dgp</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="–ø–æ–ª—É—á–µ–Ω–∏–µ-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏-–æ–±-–∞–∫–∫–∞—É–Ω—Ç–µ"><a href="#–ø–æ–ª—É—á–µ–Ω–∏–µ-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏-–æ–±-–∞–∫–∫–∞—É–Ω—Ç–µ" class="header-anchor">#</a> –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ</h3> <p>–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞, –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ –∏ —Ä–∞—Å—Å—á–µ—Ç–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ (—É—á–∏—Ç—ã–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –µ—ë –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> current_user<span class="token operator">=</span><span class="token string">'on1x'</span><span class="token punctuation">;</span>
viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getAccounts</span><span class="token punctuation">(</span><span class="token punctuation">[</span>current_user<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//–ø–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token comment">//–º—ã –∑–∞–ø—Ä–æ—Å–∏–ª–∏ –º–∞—Å—Å–∏–≤ –∞–∫–∫–∞—É–Ω—Ç–æ–≤, —Å–º–æ—Ç—Ä–∏–º –Ω—É–ª–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π current_user</span>
			<span class="token keyword">let</span> last_vote_time<span class="token operator">=</span>Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>last_vote_time<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//—É—á–∏—Ç—ã–≤–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–æ–Ω—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</span>
			<span class="token keyword">let</span> delta_time<span class="token operator">=</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> last_vote_time <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTimezoneOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">60000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">let</span> energy<span class="token operator">=</span>response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>energy<span class="token punctuation">;</span>
			<span class="token comment">//—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –≤–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é —ç–Ω–µ—Ä–≥–∏—é</span>
			<span class="token comment">//—Å–∫–æ—Ä–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–∏–∏ –æ—Ç 0% –¥–æ 100% CHAIN_ENERGY_REGENERATION_SECONDS 5 –¥–Ω–µ–π (432000 —Å–µ–∫—É–Ω–¥)</span>
			<span class="token keyword">let</span> new_energy<span class="token operator">=</span><span class="token function">parseInt</span><span class="token punctuation">(</span>energy<span class="token operator">+</span><span class="token punctuation">(</span>delta_time<span class="token operator">*</span><span class="token number">10000</span><span class="token operator">/</span><span class="token number">432000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//—ç–Ω–µ—Ä–≥–∏–∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ 100%</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>new_energy<span class="token operator">&gt;</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				new_energy<span class="token operator">=</span><span class="token number">10000</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–∞–∫—Ç—É–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞'</span><span class="token punctuation">,</span>new_energy<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–∞–∫–∫–∞—É–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω'</span><span class="token punctuation">,</span>current_user<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token comment">//–æ—à–∏–±–∫–∞</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="—Ä–∞–±–æ—Ç–∞-—Å-–∫–ª—é—á–∞–º–∏"><a href="#—Ä–∞–±–æ—Ç–∞-—Å-–∫–ª—é—á–∞–º–∏" class="header-anchor">#</a> –†–∞–±–æ—Ç–∞ —Å –∫–ª—é—á–∞–º–∏</h3> <p>–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∫–ª—é—á–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã X –∏ Y –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø–∏—Å–∞–Ω—ã –≤ –æ–±—â–µ–ø—Ä–∏–Ω—è—Ç–æ–º —Ñ–æ—Ä–º–∞—Ç–µ DER –Ω–∞ —ç–ª–ª–µ–ø—Ç–∏—á–µ—Å–∫–æ–π –∫—Ä–∏–≤–æ–π secp256k1 (–≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏–∏ —Å–ª—É–∂–∏—Ç SHA-256). –í –±–∏–±–ª–∏–æ—Ç–µ–∫–µ viz-js-lib –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–±–æ—Ç–∞ —Å –∫–ª—é—á–∞–º–∏ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –º–æ–¥—É–ª—é <code>viz.auth</code>.</p> <p>–í Graphene —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ –ø—Ä–∏–¥—É–º–∞–ª–∏ –º–µ—Ö–∞–Ω–∏–∑–º —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã—Ö –ø–∞—Ä–æ–ª–µ–π. –ü–æ –ø—Ä–∏—á–∏–Ω–∞–º –ø–µ—Ä–µ–±–æ—Ä–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –ø–æ—ç—Ç–æ–º—É, —á—Ç–æ–±—ã —É—Å–ª–æ–∂–Ω–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π –∫ –ø—É–±–ª–∏—á–Ω–æ–º—É –ø—Ä–∏—à–ª–∏ –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª—é—á–µ–π –≤ –≤–∏–¥–µ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏ —Å—Ç—Ä–æ–∫: –ª–æ–≥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç–∞, –ø–∞—Ä–æ–ª—å (—Å–ª–æ–∂–Ω—ã–π), —Ç–∏–ø –¥–æ—Å—Ç—É–ø–∞.</p> <p>–ß–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —É—Å–ª–æ–≤–∏–ª–∏—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —É–ø—Ä–æ—â–∞—è –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∫ —Ä–∞–∑–Ω—ã–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–æ –æ–±—â–µ–º—É –ø–∞—Ä–æ–ª—é. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å test –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∏—Å–ø–æ–ª—å–∑—É—è –æ–±—â–∏–π –ø–∞—Ä–æ–ª—å PK3452JENDK332. –ü—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—è —ç—Ç–∏ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–∏ –Ω—É–∂–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–æ—Å—Ç—É–ø–∞, –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é —Å—Ç—Ä–æ–∫. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ç–æ–∫–µ–Ω—ã? –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –Ω–∞–ª–µ—Ç—É –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª—é—á –ø–æ —Å—Ç—Ä–æ–∫–µ testPK3452JENDK332active. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–≥—Ä–∞–∂–¥–∞–µ—Ç –∫–æ–≥–æ-—Ç–æ? –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –∫–ª—é—á –ø–æ —Å—Ç—Ä–æ–∫–µ testPK3452JENDK332regular. –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –¥–æ—Å—Ç—É–ø –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –æ–±—â–µ–º—É –ø–∞—Ä–æ–ª—é, –Ω–æ –ª–∏—à–∞–µ—Ç –≥–∏–±–∫–æ—Å—Ç–∏ –∏ –ø–æ–¥–≤–µ—Ä–≥–∞–µ—Ç –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∞–∫–∫–∞—É–Ω—Ç. –¢–∏–ø—ã –¥–æ—Å—Ç—É–ø–∞ –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ –ø–æ–ª–Ω–æ–º–æ—á–∏—è –∏ –ø—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Å–∞–π—Ç–∞ –¥–æ—Å—Ç—É–ø –∫ –∞–∫–∫–∞—É–Ω—Ç—É –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω. –ü–æ—ç—Ç–æ–º—É —á–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –æ—Ç–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –æ—Ç –ø—Ä–∞–≤–∏–ª –∏–ª–∏ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–µ–π —Ä–∞–¥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –æ–±—â–∏–π –ø–∞—Ä–æ–ª—å.</p> <h3 id="—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è-–∞–∫–∫–∞—É–Ω—Ç–∞"><a href="#—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è-–∞–∫–∫–∞—É–Ω—Ç–∞" class="header-anchor">#</a> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞</h3> <p>–û–±—ã—á–Ω–æ, –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–∞—Ä–æ–ª—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –ù–æ –±—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π –ø–∞—Ä–æ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–∞ –≤ –º–µ—Ç–æ–¥–µ <code>viz.auth.toWif(account_login,general_pass,auth_type);</code>. –í –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è –∑–∞–¥–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–∞ –ø–æ –Ω–µ–º—É –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ —Ç–∏–ø—É –¥–æ—Å—Ç—É–ø–∞:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">pass_gen</span><span class="token punctuation">(</span><span class="token parameter">length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span>to_wif<span class="token operator">=</span><span class="token boolean">true</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">let</span> charset<span class="token operator">=</span><span class="token string">'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+-=_:;.,@!^&amp;*$'</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> ret<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token operator">=</span>charset<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>length<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">{</span>
		ret<span class="token operator">+=</span>charset<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>to_wif<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">let</span> wif<span class="token operator">=</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">toWif</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span>ret<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> wif<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>–ü–æ–ª—É—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –º–æ–∂–Ω–æ –º–µ—Ç–æ–¥–æ–º <code>viz.auth.wifToPublic(wif)</code>. –î–ª—è —Ç–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–∏ –ø–æ –∫–æ–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏ –ª–æ–≥–∏–Ω–∞, –ø–∞—Ä–æ–ª—è –∏ —Ç–∏–ø–∞ –¥–æ—Å—Ç—É–ø–∞, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –º–µ—Ç–æ–¥ <code>viz.auth.getPrivateKeys(account_login,general_pass,auth_types);</code>. –ú–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –ø–æ —à–∞–±–ª–æ–Ω—É result.<em>type</em> –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π (–∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é) –∏ result.<em>type</em>Pubkey –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–ª—é—á–µ–π (–∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —Ç—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞—Ç—å –≤ –±–ª–æ–∫—á–µ–π–Ω –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è). –ö–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –≤ VIZ –ø–æ –≥–ª–∞–≤–Ω–æ–º—É –ø–∞—Ä–æ–ª—é:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> user_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span><span class="token comment">//–∞–∫–∫–∞—É–Ω—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª—é—á</span>

<span class="token keyword">function</span> <span class="token function">create_account_with_general_pass</span><span class="token punctuation">(</span><span class="token parameter">account_login<span class="token punctuation">,</span>token_amount<span class="token punctuation">,</span>shares_amount<span class="token punctuation">,</span>general_pass</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">let</span> fixed_token_amount<span class="token operator">=</span><span class="token string">''</span><span class="token operator">+</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>token_amount<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">' VIZ'</span><span class="token punctuation">;</span><span class="token comment">//—Ç–æ–∫–µ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –≤ –¥–æ–ª—é –Ω–æ–≤–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É</span>
	<span class="token keyword">let</span> fixed_shares_amount<span class="token operator">=</span><span class="token string">''</span><span class="token operator">+</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>shares_amount<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">' SHARES'</span><span class="token punctuation">;</span><span class="token comment">//–¥–æ–ª—è, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∞ –Ω–æ–≤–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token operator">==</span>token_amount<span class="token punctuation">)</span><span class="token punctuation">{</span>
		fixed_token_amount<span class="token operator">=</span><span class="token string">'0.000 VIZ'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token operator">==</span>shares_amount<span class="token punctuation">)</span><span class="token punctuation">{</span>
		fixed_shares_amount<span class="token operator">=</span><span class="token string">'0.000000 SHARES'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">let</span> auth_types <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'regular'</span><span class="token punctuation">,</span><span class="token string">'active'</span><span class="token punctuation">,</span><span class="token string">'master'</span><span class="token punctuation">,</span><span class="token string">'memo'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//—Ç–∏–ø—ã –¥–æ—Å—Ç—É–ø–æ–≤</span>
	<span class="token keyword">let</span> keys<span class="token operator">=</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">getPrivateKeys</span><span class="token punctuation">(</span>account_login<span class="token punctuation">,</span>general_pass<span class="token punctuation">,</span>auth_types<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//—Ç–∏–ø—ã –¥–æ—Å—Ç—É–ø–æ–≤ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—É–±–ª–∏—á–Ω—ã–µ –∫–ª—é—á–∏ —Å –≤–µ—Å–æ–º, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –¥–ª—è —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</span>
	<span class="token keyword">let</span> master <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token string-property property">'weight_threshold'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
		<span class="token string-property property">'account_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string-property property">'key_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">[</span>keys<span class="token punctuation">.</span>masterPubkey<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> active <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token string-property property">'weight_threshold'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
		<span class="token string-property property">'account_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string-property property">'key_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">[</span>keys<span class="token punctuation">.</span>activePubkey<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> regular <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token string-property property">&quot;weight_threshold&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;account_auths&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;key_auths&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">[</span>keys<span class="token punctuation">.</span>regularPubkey<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> memo_key<span class="token operator">=</span>keys<span class="token punctuation">.</span>memoPubkey<span class="token punctuation">;</span>
	<span class="token keyword">let</span> json_metadata<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> referrer<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
	viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">accountCreate</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span> fixed_token_amount<span class="token punctuation">,</span> fixed_shares_amount<span class="token punctuation">,</span> user_login<span class="token punctuation">,</span> account_login<span class="token punctuation">,</span> master<span class="token punctuation">,</span> active<span class="token punctuation">,</span> regular<span class="token punctuation">,</span> memo_key<span class="token punctuation">,</span> json_metadata<span class="token punctuation">,</span> referrer<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'VIZ Account: '</span><span class="token operator">+</span>account_login<span class="token operator">+</span><span class="token string">'\r\nGeneral pass (for private keys): '</span><span class="token operator">+</span>general_pass<span class="token operator">+</span><span class="token string">'\r\nPrivate master key: '</span><span class="token operator">+</span>keys<span class="token punctuation">.</span>master<span class="token operator">+</span><span class="token string">'\r\nPrivate active key: '</span><span class="token operator">+</span>keys<span class="token punctuation">.</span>active<span class="token operator">+</span><span class="token string">'\r\nPrivate regular key: '</span><span class="token operator">+</span>keys<span class="token punctuation">.</span>regular<span class="token operator">+</span><span class="token string">'\r\nPrivate memo key: '</span><span class="token operator">+</span>keys<span class="token punctuation">.</span>memo<span class="token operator">+</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="—Å–æ–∑–¥–∞–Ω–∏–µ-–≤–∞—É—á–µ—Ä–∞-–∏–Ω–≤–∞–∏—Ç-–∫–æ–¥–∞"><a href="#—Å–æ–∑–¥–∞–Ω–∏–µ-–≤–∞—É—á–µ—Ä–∞-–∏–Ω–≤–∞–∏—Ç-–∫–æ–¥–∞" class="header-anchor">#</a> –°–æ–∑–¥–∞–Ω–∏–µ –≤–∞—É—á–µ—Ä–∞ (–∏–Ω–≤–∞–π—Ç-–∫–æ–¥–∞)</h3> <p>–í –±–ª–æ–∫—á–µ–π–Ω–µ VIZ –µ—Å—Ç—å –º–µ—Ö–∞–Ω–∏–∫–∞ –≤–∞—É—á–µ—Ä–æ–≤. –ò—Ö –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∫—Ç–æ —É–≥–æ–¥–Ω–æ, –ø–µ—Ä–µ–≤–µ–¥—è –≤ –Ω–µ–≥–æ —Ç–æ–∫–µ–Ω—ã VIZ. –í–∞—É—á–µ—Ä—ã –º–æ–∂–Ω–æ –ø–æ–≥–∞—Å–∏—Ç—å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–Ω–≤–∞–π—Ç-–∫–æ–¥–∞ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞. –í –ø–µ—Ä–≤–æ–º —Å–ª—É—á–∞–µ —Ç–æ–∫–µ–Ω—ã –ø–æ—Å—Ç—É–ø–∞—é—Ç –Ω–∞ —Å—á–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞ –ø—Ä–µ–¥—ä—è–≤–∏—Ç–µ–ª—è, –≤–æ –≤—Ç–æ—Ä–æ–º —Å–ª—É—á–∞–µ —Ç–æ–∫–µ–Ω—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ –¥–æ–ª—é —Å–µ—Ç–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (—Å –µ–¥–∏–Ω—ã–º –∫–ª—é—á–æ–º –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–æ—Å—Ç—É–ø–∞).</p> <p>–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞—É—á–µ—Ä–∞:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> user_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> fixed_amount<span class="token operator">=</span><span class="token string">'100.000 VIZ'</span><span class="token punctuation">;</span><span class="token comment">//–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω—ã–µ –Ω–∞ –≤–∞—É—á–µ—Ä</span>
<span class="token keyword">var</span> private_key<span class="token operator">=</span><span class="token function">pass_gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> public_key<span class="token operator">=</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">wifToPublic</span><span class="token punctuation">(</span>private_key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–ø–æ–ª—É—á–∞–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">createInvite</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>user_login<span class="token punctuation">,</span>fixed_amount<span class="token punctuation">,</span>public_key<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–í–∞—É—á–µ—Ä —Å–æ–∑–¥–∞–Ω, –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏: '</span><span class="token operator">+</span>public_key<span class="token operator">+</span><span class="token string">', –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: '</span><span class="token operator">+</span>private_key<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è-—á–µ—Ä–µ–∑-–∏–Ω–≤–∞–∏—Ç-–∫–æ–¥"><a href="#—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è-—á–µ—Ä–µ–∑-–∏–Ω–≤–∞–∏—Ç-–∫–æ–¥" class="header-anchor">#</a> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∏–Ω–≤–∞–π—Ç-–∫–æ–¥</h3> <p>–î–ª—è –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω–≤–∞–π—Ç-–∫–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∞–∫–∫–∞—É–Ω—Ç <code>invite</code> —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∞–∫—Ç–∏–≤–Ω—ã–º –∫–ª—é—á–æ–º <code>5KcfoRuDfkhrLCxVcE9x51J6KN9aM9fpb78tLrvvFckxVV6FyFW</code>, –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> receiver<span class="token operator">=</span><span class="token string">'newtestaccount'</span><span class="token punctuation">;</span><span class="token comment">//–ª–æ–≥–∏–Ω –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞</span>
<span class="token keyword">var</span> secret_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –∏–Ω–≤–∞–π—Ç-–∫–æ–¥–∞</span>
<span class="token keyword">var</span> private_key<span class="token operator">=</span><span class="token function">pass_gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> public_key<span class="token operator">=</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">wifToPublic</span><span class="token punctuation">(</span>private_key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–ø–æ–ª—É—á–∞–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">inviteRegistration</span><span class="token punctuation">(</span><span class="token string">'5KcfoRuDfkhrLCxVcE9x51J6KN9aM9fpb78tLrvvFckxVV6FyFW'</span><span class="token punctuation">,</span><span class="token string">'invite'</span><span class="token punctuation">,</span>receiver<span class="token punctuation">,</span>secret_key<span class="token punctuation">,</span>public_key<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–ê–∫–∫–∞—É–Ω—Ç '</span><span class="token operator">+</span>receiver<span class="token operator">+</span><span class="token string">' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –æ–±—â–∏–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–æ—Å—Ç—É–ø–∞: '</span><span class="token operator">+</span>private_key<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–ø–æ–≥–∞—à–µ–Ω–∏–µ-–≤–∞—É—á–µ—Ä–∞"><a href="#–ø–æ–≥–∞—à–µ–Ω–∏–µ-–≤–∞—É—á–µ—Ä–∞" class="header-anchor">#</a> –ü–æ–≥–∞—à–µ–Ω–∏–µ –≤–∞—É—á–µ—Ä–∞</h3> <p>–î–ª—è –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–∞—É—á–µ—Ä–∞ –≤ —Å–∏—Å—Ç–µ–º–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∞–∫–∫–∞—É–Ω—Ç <code>invite</code> —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∞–∫—Ç–∏–≤–Ω—ã–º –∫–ª—é—á–æ–º <code>5KcfoRuDfkhrLCxVcE9x51J6KN9aM9fpb78tLrvvFckxVV6FyFW</code>, –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> receiver<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span><span class="token comment">//–ª–æ–≥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç–∞</span>
<span class="token keyword">var</span> secret_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –∏–Ω–≤–∞–π—Ç-–∫–æ–¥–∞</span>
<span class="token keyword">var</span> public_key<span class="token operator">=</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">wifToPublic</span><span class="token punctuation">(</span>secret_key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–ø–æ–ª—É—á–∞–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –≤–∞—É—á–µ—Ä–∞</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">claimInviteBalance</span><span class="token punctuation">(</span><span class="token string">'5KcfoRuDfkhrLCxVcE9x51J6KN9aM9fpb78tLrvvFckxVV6FyFW'</span><span class="token punctuation">,</span><span class="token string">'invite'</span><span class="token punctuation">,</span>receiver<span class="token punctuation">,</span>secret_key<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–ê–∫–∫–∞—É–Ω—Ç '</span><span class="token operator">+</span>receiver<span class="token operator">+</span><span class="token string">' —É—Å–ø–µ—à–Ω–æ –ø–æ–≥–∞—Å–∏–ª –≤–∞—É—á–µ—Ä —Å –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º '</span><span class="token operator">+</span>public_key<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è-—Ç–æ–∫–µ–Ω–æ–≤-viz-–≤-–¥–æ–ª—é"><a href="#–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è-—Ç–æ–∫–µ–Ω–æ–≤-viz-–≤-–¥–æ–ª—é" class="header-anchor">#</a> –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ VIZ –≤ –¥–æ–ª—é</h3> <p>–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ VIZ –≤ –¥–æ–ª—é —Å–µ—Ç–∏ SHARES –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö —Å–µ–±–µ –∂–µ –≤ –¥–æ–ª—é –æ–ø–µ—Ä–∞—Ü–∏–µ–π transfer_to_vesting:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> current_user<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª—é—á</span>
viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getAccounts</span><span class="token punctuation">(</span><span class="token punctuation">[</span>current_user<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//–ø–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">'0.000 VIZ'</span><span class="token operator">!=</span>response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>balance<span class="token punctuation">)</span><span class="token punctuation">{</span>
				viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">transferToVesting</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>current_user<span class="token punctuation">,</span>current_user<span class="token punctuation">,</span>response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>balance<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
						console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –¥–æ–ª—é —Å–µ—Ç–∏'</span><span class="token punctuation">,</span>response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>balance<span class="token punctuation">)</span><span class="token punctuation">;</span>
						console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">else</span><span class="token punctuation">{</span>
						console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–±–∞–ª–∞–Ω—Å –Ω–∞ –Ω—É–ª–µ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–∞–∫–∫–∞—É–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω'</span><span class="token punctuation">,</span>current_user<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token comment">//–æ—à–∏–±–∫–∞</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è-–¥–æ–ª–∏-–≤-—Ç–æ–∫–µ–Ω—ã-viz"><a href="#–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è-–¥–æ–ª–∏-–≤-—Ç–æ–∫–µ–Ω—ã-viz" class="header-anchor">#</a> –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–æ–ª–∏ –≤ —Ç–æ–∫–µ–Ω—ã VIZ</h3> <p>–ß–∞—Å—Ç–æ –Ω–æ–≤—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–ª —á–∞—Å—Ç—å —Ç–æ–∫–µ–Ω–æ–≤ –¥—Ä—É–≥–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É –∏ –Ω—É–∂–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—É—é –¥–æ–ª—é –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ SHARES –≤ VIZ. –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–≤–∏—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ SHARES –Ω–∞ –≤—ã–≤–æ–¥ –∏–∑ –¥–æ–ª–∏:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> current_user<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª—é—á</span>
viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getAccounts</span><span class="token punctuation">(</span><span class="token punctuation">[</span>current_user<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//–ø–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			vesting_shares<span class="token operator">=</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>vesting_shares<span class="token punctuation">)</span><span class="token punctuation">;</span>
			delegated_vesting_shares<span class="token operator">=</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>delegated_vesting_shares<span class="token punctuation">)</span><span class="token punctuation">;</span>
			shares<span class="token operator">=</span>vesting_shares <span class="token operator">-</span> delegated_vesting_shares<span class="token punctuation">;</span>
			<span class="token keyword">let</span> fixed_shares<span class="token operator">=</span><span class="token string">''</span><span class="token operator">+</span>shares<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">' SHARES'</span><span class="token punctuation">;</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–¥–æ—Å—Ç—É–ø–Ω—ã–µ SHARES –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏'</span><span class="token punctuation">,</span>fixed_shares<span class="token punctuation">)</span><span class="token punctuation">;</span>
			viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">withdrawVesting</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>current_user<span class="token punctuation">,</span>fixed_shares<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–∑–∞–ø—É—Å–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –¥–æ–ª–∏ —Å–µ—Ç–∏ –≤ —Ç–æ–∫–µ–Ω—ã VIZ'</span><span class="token punctuation">,</span>fixed_shares<span class="token punctuation">)</span><span class="token punctuation">;</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span><span class="token punctuation">{</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–∞–∫–∫–∞—É–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω'</span><span class="token punctuation">,</span>current_user<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token comment">//–æ—à–∏–±–∫–∞</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–ø–µ—Ä–µ–≤–æ–¥-—Ç–æ–∫–µ–Ω–æ–≤"><a href="#–ø–µ—Ä–µ–≤–æ–¥-—Ç–æ–∫–µ–Ω–æ–≤" class="header-anchor">#</a> –ü–µ—Ä–µ–≤–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤</h3> <p>–ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–≤–æ–¥–∞ 1.000 VIZ –∏–∑ –±–∞–ª–∞–Ω—Å–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ –≤ –∫–æ–º–∏—Ç–µ—Ç:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> current_user<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> target<span class="token operator">=</span><span class="token string">'committee'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> fixed_amount<span class="token operator">=</span><span class="token string">'1.000 VIZ'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> memo<span class="token operator">=</span><span class="token string">'–ó–∞–º–µ—Ç–∫–∞'</span><span class="token punctuation">;</span><span class="token comment">//utf-8 –≤–∫–ª—é—á–∞—è emoji</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>current_user<span class="token punctuation">,</span>target<span class="token punctuation">,</span>fixed_amount<span class="token punctuation">,</span>memo<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//–ø–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token comment">//–æ—à–∏–±–∫–∞</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ-—É—á–∞—Å—Ç–∏–∫–∞-—Å–µ—Ç–∏"><a href="#–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ-—É—á–∞—Å—Ç–∏–∫–∞-—Å–µ—Ç–∏" class="header-anchor">#</a> –ù–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ —É—á–∞—Å—Ç–∏–∫–∞ —Å–µ—Ç–∏</h3> <p>–ê–∫–∫–∞—É–Ω—Ç –º–æ–∂–µ—Ç –Ω–∞–≥—Ä–∞–¥–∏—Ç—å –¥—Ä—É–≥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å–µ—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—è –æ–ø–µ—Ä–∞—Ü–∏—é award. –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ü–µ–ª—å –Ω–∞–≥—Ä–∞–¥—ã target, –ø—Ä–∏—á–∏–Ω—É (–Ω–æ–º–µ—Ä custom_sequence –∏–ª–∏ –∑–∞–º–µ—Ç–∫—É memo), –∞ —Ç–∞–∫–∂–µ –±–µ–Ω–µ—Ñ–∏—Ü–∏–∞—Ä–æ–≤ (–∞–∫–∫–∞—É–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–¥–µ–ª—è—Ç –Ω–∞–≥—Ä–∞–¥—É —Ü–µ–ª–∏). –ü—Ä–∏–º–µ—Ä:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> current_user<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span><span class="token comment">//–∞–∫–∫–∞—É–Ω—Ç –Ω–∞–≥—Ä–∞–∂–¥–∞—é—â–µ–≥–æ</span>
<span class="token keyword">var</span> regular_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –æ–±—ã—á–Ω—ã–π –∫–ª—é—á –Ω–∞–≥—Ä–∞–∂–¥–∞—é—â–µ–≥–æ</span>

<span class="token keyword">var</span> target<span class="token operator">=</span><span class="token string">'viz.plus'</span><span class="token punctuation">;</span><span class="token comment">//—Ü–µ–ª—å –Ω–∞–≥—Ä–∞–¥—ã - –∑–∞–∫–∞–∑—á–∏–∫ —Å—Ç–∞—Ç—å–∏</span>
<span class="token keyword">var</span> energy<span class="token operator">=</span><span class="token string">'1000'</span><span class="token punctuation">;</span><span class="token comment">//10.00% –±—É–¥—É—Ç –ø–æ—Ç—Ä–∞—á–µ–Ω—ã –∏–∑ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞</span>
<span class="token keyword">var</span> custom_sequence<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//–Ω–æ–º–µ—Ä custom –æ–ø–µ—Ä–∞—Ü–∏–∏</span>
<span class="token keyword">var</span> memo<span class="token operator">=</span><span class="token string">'—Å–ø–∞—Å–∏–±–æ –∑–∞ viz cookbook'</span><span class="token punctuation">;</span><span class="token comment">//utf-8 –≤–∫–ª—é—á–∞—è emoji</span>
<span class="token keyword">var</span> beneficiaries_list<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;account&quot;</span><span class="token operator">:</span><span class="token string">&quot;on1x&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;weight&quot;</span><span class="token operator">:</span><span class="token number">2000</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//20% –∞–≤—Ç–æ—Ä—É —Å—Ç–∞—Ç—å–∏</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">award</span><span class="token punctuation">(</span>regular_key<span class="token punctuation">,</span>current_user<span class="token punctuation">,</span>target<span class="token punctuation">,</span>energy<span class="token punctuation">,</span>custom_sequence<span class="token punctuation">,</span>memo<span class="token punctuation">,</span>beneficiaries_list<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//–ø–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token comment">//–æ—à–∏–±–∫–∞</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="—Å–º–µ–Ω–∞-–∫–ª—é—á–µ–∏-–∞–∫–∫–∞—É–Ω—Ç–∞"><a href="#—Å–º–µ–Ω–∞-–∫–ª—é—á–µ–∏-–∞–∫–∫–∞—É–Ω—Ç–∞" class="header-anchor">#</a> –°–º–µ–Ω–∞ –∫–ª—é—á–µ–π –∞–∫–∫–∞—É–Ω—Ç–∞</h3> <p>–ë—ã–≤–∞–µ—Ç, —á—Ç–æ –µ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Å–º–µ–Ω–∏—Ç—å –¥–æ—Å—Ç—É–ø—ã —É –∞–∫–∫–∞—É–Ω—Ç–∞. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ –ø—Ä–∏—á–∏–Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞, –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –¥–ª—è –º—É–ª—å—Ç–∏-–ø–æ–¥–ø–∏—Å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–º (–∫–æ–≥–¥–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–ª—é—á–∞–º–∏).</p> <p>–ü–æ–ª–Ω–æ–º–æ—á–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –∏–º–µ—é—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:</p> <ul><li><em>weight_threshold</em> ‚Äî –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –≤–µ—Å –¥–ª—è –æ–¥–æ–±—Ä–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –Ω—É–∂–Ω–æ–≥–æ —Ç–∏–ø–∞;</li> <li><em>account_auths</em> ‚Äî –º–∞—Å—Å–∏–≤ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∏ –∏—Ö –≤–µ—Å–æ–≤. –ê–∫–∫–∞—É–Ω—Ç—ã –º–æ–≥—É—Ç –¥–æ–±–∞–≤–∏—Ç—å –≤–µ—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫ –Ω–µ–π –ø–æ–¥–ø–∏—Å–∏ –∫–ª—é—á–æ–º;</li> <li><em>key_auths</em> ‚Äî –º–∞—Å—Å–∏–≤ –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–ª—é—á–µ–π –∏ –∏—Ö –≤–µ—Å–æ–≤.</li></ul> <p>–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –Ω–µ–π, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø–æ–¥–ø–∏—Å–µ–π –∑–∞–¥–µ–π—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –ª–∏ –≤–µ—Å–æ–º –æ–Ω–∏ –æ–±–ª–∞–¥–∞—é—Ç, –¥–ª—è —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞.</p> <p>–ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–º–æ—á–∏–π —Å –æ–¥–Ω–∏–º –∫–ª—é—á–æ–º:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;weight_threshold&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token property">&quot;account_auths&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;key_auths&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">[</span><span class="token string">&quot;VIZ6LWhhUzKmYM5VcxtC2FpEjzr71imfb7DeGA9yodeqnvtP2SYjA&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>–ï—Å–ª–∏ —É –∞–∫–∫–∞—É–Ω—Ç–∞ –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω—ã —ç—Ç–∏ –ø–æ–ª–Ω–æ–º–æ—á–∏—è –≤ —Ç–∏–ø –¥–æ—Å—Ç—É–ø–∞ regular, —Ç–æ –¥–ª—è —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –±–ª–æ–∫—á–µ–π–Ω –±—É–¥–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∫–ª—é—á–æ–º <code>5KRLZitDd5c9uZzDgTMF4se4eVewENtZ29GbCuKwbT3msRbtLgi</code> (–∫–æ—Ç–æ—Ä–æ–º—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ –ø–æ–ª–Ω–æ–º–æ—á–∏—è—Ö –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á <code>VIZ6LWhhUzKmYM5VcxtC2FpEjzr71imfb7DeGA9yodeqnvtP2SYjA</code>).</p> <p>–ü—Ä–∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É, –Ω–∞–ø—Ä–∏–º–µ—Ä <code>test</code>, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª–Ω–æ–º–æ—á–∏—è –Ω–∞:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;weight_threshold&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token property">&quot;account_auths&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">[</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;key_auths&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">[</span><span class="token string">&quot;VIZ6LWhhUzKmYM5VcxtC2FpEjzr71imfb7DeGA9yodeqnvtP2SYjA&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –±–ª–æ–∫—á–µ–π–Ω –±—É–¥–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å—å –ª–∏–±–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–ª—é—á–æ–º, –ª–∏–±–æ –∫–ª—é—á–æ–º –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–æ—Å—Ç—É–ø–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ <code>test</code>.</p> <p>–ú—É–ª—å—Ç–∏-–ø–æ–¥–ø–∏—Å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç —É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–º–æ—á–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 2 –∏–∑ 3 –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ–º–æ—á–∏–µ:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;weight_threshold&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
	<span class="token property">&quot;account_auths&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;key_auths&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">[</span><span class="token string">&quot;VIZ6LWhhUzKmYM5VcxtC2FpEjzr71imfb7DeGA9yodeqnvtP2SYjA&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">[</span><span class="token string">&quot;VIZ5mK1zLnYHy7PbnsxRpS4NbKjEoH2J9eBmgSjVKJ5BKQpLLj9T4&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">[</span><span class="token string">&quot;VIZ4uiqeDPsoteSFVbTWPBUbmfzxYkJyXYmA6B1pAFWZ59n4iBuUK&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –±—ã–ª–∞ –ø—Ä–∏–Ω—è—Ç–∞ –±–ª–æ–∫—á–µ–π–Ω–æ–º, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∏ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 2 –∏–∑ 3 —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π. –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –ø—É–±–ª–∏—á–Ω–æ–º—É –∫–ª—é—á—É <code>VIZ4uiqeDPsoteSFVbTWPBUbmfzxYkJyXYmA6B1pAFWZ59n4iBuUK</code> —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á <code>5KMBKopgd56MZvV8FYhp5AP7AWFyLKiybqRnZYgjXukw34VRE78</code>.</p> <p>–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä —Å–±—Ä–æ—Å–∞ –¥–æ—Å—Ç—É–ø–æ–≤ –∫ –∞–∫–∫–∞—É–Ω—Ç—É (—Å–º–µ–Ω—É –≤—Å–µ—Ö –∫–ª—é—á–µ–π –∏ –ø–æ–ª–Ω–æ–º–æ—á–∏–π):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//—Ñ—É–Ω–∫—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–∞—Å—Ç–µ—Ä –∫–ª—é—á –æ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞</span>
<span class="token keyword">function</span> <span class="token function">reset_account_with_general_pass</span><span class="token punctuation">(</span><span class="token parameter">account_login<span class="token punctuation">,</span>master_key<span class="token punctuation">,</span>general_pass</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token operator">==</span>general_pass<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω –æ–±—â–∏–π –ø–∞—Ä–æ–ª—å, —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –µ–≥–æ</span>
		general_pass<span class="token operator">=</span><span class="token function">pass_gen</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">let</span> auth_types <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'regular'</span><span class="token punctuation">,</span><span class="token string">'active'</span><span class="token punctuation">,</span><span class="token string">'master'</span><span class="token punctuation">,</span><span class="token string">'memo'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> keys<span class="token operator">=</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">getPrivateKeys</span><span class="token punctuation">(</span>account_login<span class="token punctuation">,</span>general_pass<span class="token punctuation">,</span>auth_types<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> master <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token string-property property">'weight_threshold'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
		<span class="token string-property property">'account_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string-property property">'key_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">[</span>keys<span class="token punctuation">.</span>masterPubkey<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> active <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token string-property property">'weight_threshold'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
		<span class="token string-property property">'account_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string-property property">'key_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">[</span>keys<span class="token punctuation">.</span>activePubkey<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> regular <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token string-property property">'weight_threshold'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
		<span class="token string-property property">'account_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string-property property">'key_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">[</span>keys<span class="token punctuation">.</span>regularPubkey<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> memo_key<span class="token operator">=</span>keys<span class="token punctuation">.</span>memoPubkey<span class="token punctuation">;</span>
	viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getAccounts</span><span class="token punctuation">(</span><span class="token punctuation">[</span>account_login<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">==</span>response<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
			err<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">let</span> json_metadata<span class="token operator">=</span>response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>json_metadata<span class="token punctuation">;</span>
			viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">accountUpdate</span><span class="token punctuation">(</span>master_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>master<span class="token punctuation">,</span>active<span class="token punctuation">,</span>regular<span class="token punctuation">,</span>memo_key<span class="token punctuation">,</span>json_metadata<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Reset Account: '</span><span class="token operator">+</span>account_login<span class="token operator">+</span><span class="token string">'\r\nGeneral pass (for private keys): '</span><span class="token operator">+</span>general_pass<span class="token operator">+</span><span class="token string">'\r\nPrivate master key: '</span><span class="token operator">+</span>keys<span class="token punctuation">.</span>master<span class="token operator">+</span><span class="token string">'\r\nPrivate active key: '</span><span class="token operator">+</span>keys<span class="token punctuation">.</span>active<span class="token operator">+</span><span class="token string">'\r\nPrivate regular key: '</span><span class="token operator">+</span>keys<span class="token punctuation">.</span>regular<span class="token operator">+</span><span class="token string">'\r\nPrivate memo key: '</span><span class="token operator">+</span>keys<span class="token punctuation">.</span>memo<span class="token operator">+</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span><span class="token punctuation">{</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="–æ–±—ä—è–≤–ª–µ–Ω–∏–µ-–∞–∫–∫–∞—É–Ω—Ç–∞-–¥–µ–ª–µ–≥–∞—Ç–æ–º"><a href="#–æ–±—ä—è–≤–ª–µ–Ω–∏–µ-–∞–∫–∫–∞—É–Ω—Ç–∞-–¥–µ–ª–µ–≥–∞—Ç–æ–º" class="header-anchor">#</a> –û–±—ä—è–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ –¥–µ–ª–µ–≥–∞—Ç–æ–º</h3> <p>–£ –∫–∞–∂–¥–æ–≥–æ –¥–µ–ª–µ–≥–∞—Ç–∞ –µ—Å—Ç—å –∫–ª—é—á –ø–æ–¥–ø–∏—Å–∏ –±–ª–æ–∫–æ–≤ (<code>signing_key</code>), –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –±–ª–æ–∫—á–µ–π–Ω–æ–º –ø–æ–¥–ø–∏—Å–∏ –±–ª–æ–∫–∞. –î–µ–ª–µ–≥–∞—Ç—Å–∫–∞—è –Ω–æ–¥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º –ø–æ–¥–ø–∏—Å–∏ (–ª—É—á—à–µ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –∑–∞—Ä–∞–Ω–µ–µ), –∞ –≤ –±–ª–æ–∫—á–µ–π–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á, –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–µ–π. –í —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –¥–µ–ª–µ–≥–∞—Ç –¥–æ–ª–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –±–ª–æ–∫—á–µ–π–Ω –æ—Ç–º–µ—Ç–∏—Ç –µ–≥–æ –∫–∞–∫ –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –æ–±–Ω—É–ª–∏–≤ –∫–ª—é—á –ø–æ–¥–ø–∏—Å–∏. –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è –º–æ–∂–Ω–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤—ã—Å—Ç–∞–≤–∏–≤ –ø—É—Å—Ç–æ–π –∫–ª—é—á –ø–æ–¥–ø–∏—Å–∏ <code>VIZ1111111111111111111111111111111114T1Anm</code>. –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ –¥–µ–ª–µ–≥–∞—Ç–æ–º:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> url<span class="token operator">=</span><span class="token string">'https://...'</span><span class="token punctuation">;</span><span class="token comment">//—Å—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞—è–≤–ª–µ–Ω–∏–µ –æ –Ω–∞–º–µ—Ä–µ–Ω–∏–∏ –±—ã—Ç—å –¥–µ–ª–µ–≥–∞—Ç–æ–º</span>
<span class="token keyword">var</span> private_key<span class="token operator">=</span><span class="token function">pass_gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> signing_key<span class="token operator">=</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">wifToPublic</span><span class="token punctuation">(</span>private_key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">witnessUpdate</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>url<span class="token punctuation">,</span>signing_key<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–î–µ–ª–µ–≥–∞—Ç '</span><span class="token operator">+</span>account_login<span class="token operator">+</span><span class="token string">' –∑–∞—è–≤–∏–ª –æ –∂–µ–ª–∞–Ω–∏–∏ –±—ã—Ç—å –¥–µ–ª–µ–≥–∞—Ç–æ–º, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –ø–æ–¥–ø–∏—Å–∏ –±–ª–æ–∫–æ–≤: '</span><span class="token operator">+</span>private_key<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ-–∑–∞-–¥–µ–ª–µ–≥–∞—Ç–∞"><a href="#–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ-–∑–∞-–¥–µ–ª–µ–≥–∞—Ç–∞" class="header-anchor">#</a> –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ –¥–µ–ª–µ–≥–∞—Ç–∞</h3> <p>–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –¥–µ–ª–µ–≥–∞—Ç –Ω–∞—á–∞–ª –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å –±–ª–æ–∫–∏, —É –Ω–µ–≥–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –Ω—É–ª–µ–≤–æ–π –≤–µ—Å –≤–µ—Å –≥–æ–ª–æ—Å–æ–≤. –î–æ–ª—è –∞–∫–∫–∞—É–Ω—Ç–∞ –ø—Ä–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–∏ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–µ–ª–µ–≥–∞—Ç–æ–≤ –¥–µ–ª–∏—Ç—Å—è –º–µ–∂–¥—É –Ω–∏–º–∏. –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ –¥–µ–ª–µ–≥–∞—Ç–∞:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> witness_login<span class="token operator">=</span><span class="token string">'witness'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> value<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//–±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≥–æ–ª–æ—Å–∞ (true - –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ –¥–µ–ª–µ–≥–∞—Ç–∞, false - —Å–Ω—è—Ç—å –≥–æ–ª–æ—Å)</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">accountWitnessVote</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>witness_login<span class="token punctuation">,</span>value<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–ø–µ—Ä–µ–¥–∞—á–∞-–ø—Ä–∞–≤–∞-–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è-–ø—Ä–æ–∫—Å–∏-proxy"><a href="#–ø–µ—Ä–µ–¥–∞—á–∞-–ø—Ä–∞–≤–∞-–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è-–ø—Ä–æ–∫—Å–∏-proxy" class="header-anchor">#</a> –ü–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–∞–≤–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∫—Å–∏ (proxy)</h3> <p>–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —É—á–∞—Å—Ç–∏–µ –≤ –≤—ã–±–æ—Ä–µ –¥–µ–ª–µ–≥–∞—Ç–æ–≤, –æ–Ω –º–æ–∂–µ—Ç –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–æ —Ä–∞—Å–ø–æ—Ä—è–∂–∞—Ç—å—Å—è –µ–≥–æ –¥–æ–ª–µ–π –¥—Ä—É–≥–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É. –î–ª—è —ç—Ç–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—è <code>account_witness_proxy</code>, –µ–π –º–æ–∂–µ—Ç –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä, —á—Ç–æ–±—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–≤–æ–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ª–∏—à–Ω–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –±–ª–æ–∫—á–µ–π–Ω-—Å–∏—Å—Ç–µ–º—ã –∏ –Ω–µ —Ç–µ—Ä—è—Ç—å —Å–≤–æ—ë –≤–ª–∏—è–Ω–∏–µ (—Ç–∞–∫ –∫–∞–∫ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ –º–æ–≥—É—Ç –∑–∞—Ç—Ä–∞—á–∏–≤–∞—Ç—å—Å—è —Ç–æ–∫–µ–Ω—ã VIZ, —Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∫–ª–∞–¥—ã–≤–∞–µ—Ç –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –∞–Ω–∞–ª–æ–≥–∏–Ω–æ–π –¥–æ–ª–∏ —Å–µ—Ç–∏).</p> <p>–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ—à–∏—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –≤—ã–±–æ—Ä–µ –¥–µ–ª–µ–≥–∞—Ç–æ–≤, —Ç–æ –ø–µ—Ä–≤—ã–π –∂–µ –≥–æ–ª–æ—Å –∑–∞ –¥–µ–ª–µ–≥–∞—Ç–∞ –æ—Ç–º–µ–Ω–∏—Ç –ø—Ä–æ–∫—Å–∏.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> proxy_login<span class="token operator">=</span><span class="token string">'proxy'</span><span class="token punctuation">;</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">accountWitnessProxy</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>proxy_login<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–≥–æ–ª–æ—Å—É–µ–º—ã—Ö-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤-—Å–µ—Ç–∏"><a href="#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–≥–æ–ª–æ—Å—É–µ–º—ã—Ö-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤-—Å–µ—Ç–∏" class="header-anchor">#</a> –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥–æ–ª–æ—Å—É–µ–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–µ—Ç–∏</h3> <p>–î–µ–ª–µ–≥–∞—Ç—ã —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É—é—Ç —Å–≤–æ—é –ø–æ–∑–∏—Ü–∏—é –ø–æ –≥–æ–ª–æ—Å—É–µ–º—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º —Å–µ—Ç–∏. –ë–ª–æ–∫—á–µ–π–Ω —Å–∏—Å—Ç–µ–º–∞ –∫–∞–∂–¥—ã–π —Ü–∏–∫–ª –æ—á–µ—Ä–µ–¥–∏ –¥–µ–ª–µ–≥–∞—Ç–æ–≤ (21 –±–ª–æ–∫) –≤—ã—á–∏—Å–ª—è–µ—Ç –º–µ–¥–∏–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≥–æ–ª–æ—Å—É–µ–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∏—Ö –Ω–∞ —ç—Ç–æ—Ç —Ü–∏–∫–ª. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ –≥–æ–ª–æ—Å—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ç–∏ –º–æ–∂–Ω–æ –ø—Ä–æ—á–µ—Å—Ç—å –≤ —Ä–∞–∑–¥–µ–ª–µ <a href="/ru/cookbook/object-structures.html">–û–±—ä–µ–∫—Ç—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ VIZ</a>. –ü—Ä–∏–º–µ—Ä –æ–ø–µ—Ä–∞—Ü–∏–∏ <code>versioned_chain_properties_update</code> –¥–ª—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –¥–µ–ª–µ–≥–∞—Ç–æ–º –≥–æ–ª–æ—Å—É–µ–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–µ—Ç–∏:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª—é—á</span>

<span class="token keyword">var</span> props<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span>account_creation_fee<span class="token operator">=</span><span class="token string">'1.000 VIZ'</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span>create_account_delegation_ratio<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span>create_account_delegation_time<span class="token operator">=</span><span class="token number">2592000</span> <span class="token punctuation">;</span>
props<span class="token punctuation">.</span>bandwidth_reserve_percent<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span>bandwidth_reserve_below<span class="token operator">=</span><span class="token string">'1.000000 SHARES'</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span>committee_request_approve_min_percent<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span>flag_energy_additional_cost<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">;</span><span class="token comment">//—É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä</span>
props<span class="token punctuation">.</span>min_curation_percent<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//—É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä</span>
props<span class="token punctuation">.</span>max_curation_percent<span class="token operator">=</span><span class="token number">10000</span><span class="token punctuation">;</span><span class="token comment">//—É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä</span>
props<span class="token punctuation">.</span>min_delegation<span class="token operator">=</span><span class="token string">'1.000 VIZ'</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span>vote_accounting_min_rshares<span class="token operator">=</span><span class="token number">5000000</span> <span class="token punctuation">;</span>
props<span class="token punctuation">.</span>maximum_block_size<span class="token operator">=</span><span class="token number">65536</span><span class="token punctuation">;</span>

props<span class="token punctuation">.</span>inflation_witness_percent<span class="token operator">=</span><span class="token number">2000</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span>inflation_ratio_committee_vs_reward_fund<span class="token operator">=</span><span class="token number">7500</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span>inflation_recalc_period<span class="token operator">=</span><span class="token number">806400</span><span class="token punctuation">;</span>

props<span class="token punctuation">.</span>data_operations_cost_additional_bandwidth<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span>witness_miss_penalty_percent<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span>witness_miss_penalty_duration<span class="token operator">=</span><span class="token number">86400</span><span class="token punctuation">;</span>


viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">versionedChainPropertiesUpdate</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span>props<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–∑–∞—è–≤–∫–∞-–≤-–∫–æ–º–∏—Ç–µ—Ç"><a href="#–∑–∞—è–≤–∫–∞-–≤-–∫–æ–º–∏—Ç–µ—Ç" class="header-anchor">#</a> –ó–∞—è–≤–∫–∞ –≤ –∫–æ–º–∏—Ç–µ—Ç</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regular_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> url<span class="token operator">=</span><span class="token string">'https://...'</span><span class="token punctuation">;</span><span class="token comment">//URL —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∑–∞—è–≤–∫–∏</span>
<span class="token keyword">var</span> worker<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span><span class="token comment">//–ª–æ–≥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤ —Å–ª—É—á–∞–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ –∏—Ö —Ñ–æ–Ω–¥–∞ –∫–æ–º–∏—Ç–µ—Ç–∞</span>
<span class="token keyword">var</span> min_amount<span class="token operator">=</span><span class="token string">'0.000 VIZ'</span><span class="token punctuation">;</span><span class="token comment">//–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ VIZ –¥–ª—è —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏—è –∑–∞—è–≤–∫–∏</span>
<span class="token keyword">var</span> max_amount<span class="token operator">=</span><span class="token string">'10000.000 VIZ'</span><span class="token punctuation">;</span><span class="token comment">//–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ VIZ</span>
<span class="token keyword">var</span> duration<span class="token operator">=</span><span class="token number">5</span><span class="token operator">*</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">3600</span><span class="token punctuation">;</span><span class="token comment">//–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞—è–≤–∫–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–µ–∂–¥—É COMMITTEE_MIN_DURATION (5 –¥–Ω–µ–π) –∏ COMMITTEE_MAX_DURATION (30 –¥–Ω–µ–π))</span>

viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">committeeWorkerCreateRequest</span><span class="token punctuation">(</span>regular_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>url<span class="token punctuation">,</span>worker<span class="token punctuation">,</span>min_amount<span class="token punctuation">,</span>max_amount<span class="token punctuation">,</span>duration<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–æ—Ç–º–µ–Ω–∞-–∑–∞—è–≤–∫–∏-–≤-–∫–æ–º–∏—Ç–µ—Ç–µ"><a href="#–æ—Ç–º–µ–Ω–∞-–∑–∞—è–≤–∫–∏-–≤-–∫–æ–º–∏—Ç–µ—Ç–µ" class="header-anchor">#</a> –û—Ç–º–µ–Ω–∞ –∑–∞—è–≤–∫–∏ –≤ –∫–æ–º–∏—Ç–µ—Ç–µ</h3> <p>–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ –µ—ë —Å–æ–∑–¥–∞—Ç–µ–ª—å.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regular_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> request_id<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">;</span><span class="token comment">//–Ω–æ–º–µ—Ä –æ—Ç–º–µ–Ω—è–µ–º–æ–π –∑–∞—è–≤–∫–∏ –∫–æ–º–∏—Ç–µ—Ç–∞</span>

viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">committeeWorkerCancelRequest</span><span class="token punctuation">(</span>regular_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>request_id<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ-–ø–æ-–∑–∞—è–≤–∫–µ-–≤-–∫–æ–º–∏—Ç–µ—Ç–µ"><a href="#–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ-–ø–æ-–∑–∞—è–≤–∫–µ-–≤-–∫–æ–º–∏—Ç–µ—Ç–µ" class="header-anchor">#</a> –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –ø–æ –∑–∞—è–≤–∫–µ –≤ –∫–æ–º–∏—Ç–µ—Ç–µ</h3> <p>–ü—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ –∑–∞—è–≤–∫—É –º–æ–∂–µ—Ç –ª—é–±–æ–π —É—á–∞—Å—Ç–Ω–∏–∫ —Å–µ—Ç–∏. –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –≤—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è –∑–∞—è–≤–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–∞—Å—á–µ—Ç —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ–π —Å—É–º–º—ã –≤—ã–ø–ª–∞—Ç—ã –∏–∑ –∫–æ–º–∏—Ç–µ—Ç–∞ —É—á–∏—Ç—ã–≤–∞—é—â–∏–π –¥–æ–ª—é –≥–æ–ª–æ—Å–∞ –æ—Ç –æ–±—â–µ–≥–æ –≤–µ—Å–∞ –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–≤—à–∏—Ö –∏ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∏–º–∏ –ø—Ä–æ—Ü–µ–Ω—Ç —Å–æ–≥–ª–∞—Å–∏—è —Å —É—Å–ª–æ–≤–∏—è–º–∏ –∑–∞—è–≤–∫–∏ (–æ—Ç -100% –¥–æ +100%). –ï—Å–ª–∏ —Å—É–º–º–∞ –¥–æ–ª–∏ —Å–µ—Ç–∏ –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–≤—à–∏—Ö –ø—Ä–µ–≤—ã—à–∞–µ—Ç –≥–æ–ª–æ—Å—É–µ–º—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä —Å–µ—Ç–∏ <code>committee_request_approve_min_percent</code> –∏ —Ä–∞—Å—á–µ—Ç–Ω–∞—è —Å—É–º–º–∞ –≤—Ö–æ–¥–∏—Ç –≤ –∑–∞–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞—è–≤–∫–æ–π —Ä–∞–º–∫–∏, —Ç–æ –∑–∞—è–≤–∫–∞ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç—Å—è –∫–æ–º–∏—Ç–µ—Ç–æ–º –∏ —Å—Ç–∞–≤–∏—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –≤—ã–ø–ª–∞—Ç—ã. –ü–æ–ª–Ω—É—é –º–µ—Ö–∞–Ω–∏–∫—É –º–æ–∂–Ω–æ –∏–∑—É—á–∏—Ç—å <a href="https://github.com/VIZ-Blockchain/viz-cpp-node/blob/master/libraries/chain/database.cpp#L1380" target="_blank" rel="noopener noreferrer">–≤ —Ñ–∞–π–ª–µ database.cpp –º–µ—Ç–æ–¥ committee_processing()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ —Å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ–º –∑–∞ –∑–∞—è–≤–∫—É:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regular_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> request_id<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">;</span><span class="token comment">//–Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏ –∫–æ–º–∏—Ç–µ—Ç–∞</span>
<span class="token keyword">var</span> percent<span class="token operator">=</span><span class="token number">8000</span><span class="token punctuation">;</span><span class="token comment">//80% –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å—É–º–º—ã –∑–∞—è–≤–∫–∏, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —Å—á–∏—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç—å –∑–∞—è–≤–∫—É –≥–æ–ª–æ—Å—É—é—â–∏–π</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">committeeVoteRequest</span><span class="token punctuation">(</span>regular_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>request_id<span class="token punctuation">,</span>percent<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–ø–ª–∞—Ç–Ω—ã–µ-–ø–æ–¥–ø–∏—Å–∫–∏"><a href="#–ø–ª–∞—Ç–Ω—ã–µ-–ø–æ–¥–ø–∏—Å–∫–∏" class="header-anchor">#</a> –ü–ª–∞—Ç–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏</h3> <p>–°–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –≤ VIZ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª—é–±–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É –∑–∞–¥–∞—Ç—å —É—Å–ª–æ–≤–∏—è —Å–æ–≥–ª–∞—à–µ–Ω–∏—è, –ø–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –∫–æ—Ç–æ—Ä–æ–≥–æ –æ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ—á–∏—Å–ª—è—Ç—å—Å—è —Ç–æ–∫–µ–Ω—ã VIZ –Ω–∞ –±–∞–ª–∞–Ω—Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è. –°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –∏—Ö –≤ –º–æ–º–µ–Ω—Ç —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –±–µ–∑ —É—â–µ—Ä–±–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫—É. –ü–æ–¥–ø–∏—Å—á–∏–∫ –º–æ–∂–µ—Ç —É–∫–∞–∑–∞—Ç—å –µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ –æ–Ω –ø–ª–∞—Ç–∏—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É –ø–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—é –∏–ª–∏ —Å–æ–≥–ª–∞—Å–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–¥–ª–∏–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω—É–∂–Ω–æ–π —Å—É–º–º—ã —Ç–æ–∫–µ–Ω–æ–≤ VIZ –Ω–∞ —Å–≤–æ–µ–º –±–∞–ª–∞–Ω—Å–µ. –ü—É–±–ª–∏–∫–∞—Ü–∏—è —É—Å–ª–æ–≤–∏–π —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–µ:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> url<span class="token operator">=</span><span class="token string">'https://...'</span><span class="token punctuation">;</span><span class="token comment">//URL —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è</span>
<span class="token keyword">var</span> levels<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token comment">//–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Ä–æ–≤–Ω–µ–π –ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ (–ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å–∞–º —Ä–µ—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Ä–æ–≤–Ω–µ–π –∏ —á—Ç–æ –±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∑–∞ –∫–∞–∂–¥—ã–π), –µ—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å 0, —Ç–æ –Ω–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–µ —Å–º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã</span>
<span class="token keyword">var</span> amount<span class="token operator">=</span><span class="token string">'100.000 VIZ'</span><span class="token punctuation">;</span><span class="token comment">//–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ VIZ –∑–∞ –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏</span>
<span class="token keyword">var</span> period<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span><span class="token comment">//–ø–µ—Ä–∏–æ–¥ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π)</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">setPaidSubscription</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>url<span class="token punctuation">,</span>levels<span class="token punctuation">,</span>amount<span class="token punctuation">,</span>period<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ê–∫–∫–∞—É–Ω—Ç, –∂–µ–ª–∞—é—â–∏–π –∑–∞–∫–ª—é—á–∏—Ç—å —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –æ –ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–µ –¥–æ–ª–∂–µ–Ω –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–∏—Å—Ç–µ–º–µ —É—Å–ª–æ–≤–∏—è —Å–æ–≥–ª–∞—à–µ–Ω–∏—è, –∂–µ–ª–∞–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–¥–ª–µ–Ω–∏—è. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ø–æ–¥–ø–∏—Å–∫–∏, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–¥–µ–ª–∞–µ—Ç –ø–µ—Ä–µ—Å—á–µ—Ç –∏ –ª–∏–±–æ —Å–Ω–∏–º–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é —Å—É–º–º—É, –ª–∏–±–æ –ø—Ä–æ–¥–ª–∏—Ç –≤—Ä–µ–º—è –¥–ª—è —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'subscriber'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> provider_account<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span><span class="token comment">//–ª–æ–≥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏</span>
<span class="token keyword">var</span> level<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token comment">//–∂–µ–ª–∞–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å –ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏</span>
<span class="token keyword">var</span> amount<span class="token operator">=</span><span class="token string">'100.000 VIZ'</span><span class="token punctuation">;</span><span class="token comment">//–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ VIZ –∑–∞ –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –ø–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—é</span>
<span class="token keyword">var</span> period<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span><span class="token comment">//–ø–µ—Ä–∏–æ–¥ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—é</span>
<span class="token keyword">var</span> auto_renewal<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–¥–ª–µ–Ω–∏—è</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">paidSubscribe</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>provider_account<span class="token punctuation">,</span>level<span class="token punctuation">,</span>amount<span class="token punctuation">,</span>period<span class="token punctuation">,</span>auto_renewal<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å–ª–æ–≤–∏—è—Ö —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–µ:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> provider_account<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getPaidSubscriptionOptions</span><span class="token punctuation">(</span>provider_account<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–ª–∏ –∏–Ω–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –º–æ–∂–Ω–æ API –∑–∞–ø—Ä–æ—Å–æ–º:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'subscriber'</span><span class="token punctuation">;</span>
viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getActivePaidSubscriptions</span><span class="token punctuation">(</span>account_login<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> response<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–î–µ–π—Å—Ç–≤—É–µ—Ç —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ –ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–µ —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º '</span><span class="token operator">+</span>response<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getInactivePaidSubscriptions</span><span class="token punctuation">(</span>account_login<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> response<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–î–µ–π—Å—Ç–≤—É–µ—Ç —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ –ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–µ —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º '</span><span class="token operator">+</span>response<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–π—Å—Ç–≤—É—é—â–µ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ API –∑–∞–ø—Ä–æ—Å:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'subscriber'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> provider_account<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getPaidSubscriptionStatus</span><span class="token punctuation">(</span>account_login<span class="token punctuation">,</span>provider_account<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–°–æ–≥–ª–∞—à–µ–Ω–∏–µ —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º '</span><span class="token operator">+</span>response<span class="token punctuation">.</span>creator<span class="token punctuation">)</span><span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–°—Ç–∞—Ç—É—Å —Å–æ–≥–ª–∞—à–µ–Ω–∏—è: '</span><span class="token operator">+</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>active<span class="token operator">?</span><span class="token string">'–∞–∫—Ç–∏–≤–Ω–æ–µ'</span><span class="token operator">:</span><span class="token string">'–∏–Ω–∞–∫—Ç–∏–≤–Ω–æ–µ'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ: '</span><span class="token operator">+</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>auto_renewal<span class="token operator">?</span><span class="token string">'–≤–∫–ª—é—á–µ–Ω–æ'</span><span class="token operator">:</span><span class="token string">'–æ—Ç–∫–ª—é—á–µ–Ω–æ'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–£—Ä–æ–≤–µ–Ω—å –ø–æ–¥–ø–∏—Å–∫–∏: '</span><span class="token operator">+</span>response<span class="token punctuation">.</span>level<span class="token punctuation">)</span><span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–°—Ç–æ–∏–º–æ—Å—Ç—å —É—Ä–æ–≤–µ–Ω—è –ø–æ–¥–ø–∏—Å–∫–∏: '</span><span class="token operator">+</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>amount<span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">' VIZ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–ü–µ—Ä–∏–æ–¥ –ø–æ–¥–ø–∏—Å–∫–∏ –≤ –¥–Ω—è—Ö: '</span><span class="token operator">+</span>response<span class="token punctuation">.</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è: '</span><span class="token operator">+</span>response<span class="token punctuation">.</span>start_time<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–î–∞—Ç–∞ —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è: '</span><span class="token operator">+</span>response<span class="token punctuation">.</span>next_time<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ-–¥–æ–ª–∏"><a href="#–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ-–¥–æ–ª–∏" class="header-anchor">#</a> –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–ª–∏</h3> <p>–í –±–ª–æ–∫—á–µ–π–Ω–µ VIZ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–æ–ª—é (SHARES) –¥—Ä—É–≥–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ª–µ–π —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å –Ω–∞–≥—Ä–∞–¥–∞–º–∏, –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ–º –≤ –∫–æ–º–∏—Ç–µ—Ç–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ–º –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏ (bandwidth). –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ –¥–µ–ª–µ–≥–∞—Ç–æ–≤, —Ç–∞–∫ –∫–∞–∫ —Ç–∞–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –≤ –≤–∏–¥–µ –ø–µ—Ä–µ–¥–∞—á–∏ –ø—Ä–∞–≤–∞ –≥–æ–ª–æ—Å–∞ –≤—Å–µ–π —Å–≤–æ–µ–π –¥–æ–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–µ–π <code>account_witness_proxy</code>.</p> <p>–ü—Ä–∞–≤–∏–ª–∞ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–ª–∏ —á–∞—Å—Ç–∏—á–Ω–æ –ø—Ä–æ–ø–∏—Å–∞–Ω—ã –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–µ —Å–µ—Ç–∏, —á–∞—Å—Ç–∏—á–Ω–æ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –¥–µ–ª–µ–≥–∞—Ç–∞–º–∏:</p> <ul><li>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞–µ—Ç—Å—è –¥–µ–ª–µ–≥–∞—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –≥–æ–ª–æ—Å—É–µ–º—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä <strong>min_delegation</strong>;</li> <li>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–∞—Ü–µ–Ω–∫–∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –∑–∞–¥–∞–µ—Ç—Å—è –¥–µ–ª–µ–≥–∞—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –≥–æ–ª–æ—Å—É–µ–º—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä <strong>create_account_delegation_ratio</strong>;</li> <li>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –µ–≥–æ –æ—Ç–º–µ–Ω—ã) –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ –∑–∞–¥–∞–µ—Ç—Å—è –¥–µ–ª–µ–≥–∞—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –≥–æ–ª–æ—Å—É–µ–º—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä <strong>create_account_delegation_time</strong>;</li> <li>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ª–æ–∂–µ–Ω–∞ –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª (–∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ CHAIN_CASHOUT_WINDOW_SECONDS —Ä–∞–≤–Ω–∞—è –æ–¥–Ω–æ–º—É –æ–¥–Ω–æ–º—É –¥–Ω—é);</li></ul> <p>–ü—Ä–∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞—â–∏—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –æ—Ç –∞–±—É–∑–∞ –¥–≤–æ–π–Ω–æ–π —Ç—Ä–∞—Ç—ã —ç–Ω–µ—Ä–≥–∏–∏. –ï—Å–ª–∏ –¥–µ–ª–µ–≥–∞—Ç–æ—Ä –ø–µ—Ä–µ–¥–∞–µ—Ç 50% –æ—Ç —Å–≤–æ–µ–π –¥–æ–ª–∏, —Ç–æ —ç–Ω–µ—Ä–≥–∏—è –±—É–¥–µ—Ç —É–º–µ–Ω—å—à–µ–Ω–∞ –Ω–∞ 50%. –≠–Ω–µ—Ä–≥–∏—è –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π (–¥–æ -100%). –°—Ç–æ–∏—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è <code>delegate_vesting_shares</code> –∑–∞–¥–∞–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ–ª–∏. –ï—Å–ª–∏ –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∑–Ω–∞—á–∏—Ç –Ω–∞–¥–æ –∑–∞–¥–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ–ª–∏ <code>0.000000 SHARES</code>. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å <code>1000.000000 SHARES</code> –¥–æ <code>3000.000000 SHARES</code>, —Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–¥–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è <code>3000.000000 SHARES</code>.</p> <p>–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–ª–∏ –¥—Ä—É–≥–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> delegatee<span class="token operator">=</span><span class="token string">'recipient'</span><span class="token punctuation">;</span><span class="token comment">//—Ü–µ–ª—å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è</span>
<span class="token keyword">var</span> shares<span class="token operator">=</span><span class="token string">'100.000000 SHARES'</span><span class="token punctuation">;</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">delegateVestingShares</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>delegatee<span class="token punctuation">,</span>shares<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> start_from<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> count<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> type<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//0 - –∏—Å—Ö–æ–¥—è—â–µ–µ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, 1 - –≤—Ö–æ–¥—è—â–µ–µ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getVestingDelegations</span><span class="token punctuation">(</span>account_login<span class="token punctuation">,</span>start_from<span class="token punctuation">,</span>count<span class="token punctuation">,</span>type<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">==</span>response<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –æ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ–ª–µ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span>delegation <span class="token keyword">in</span> response<span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–æ –∞–∫–∫–∞—É–Ω—Ç—É '</span><span class="token operator">+</span>response<span class="token punctuation">[</span>delegation<span class="token punctuation">]</span><span class="token punctuation">.</span>delegatee<span class="token operator">+</span><span class="token string">', '</span><span class="token operator">+</span>response<span class="token punctuation">[</span>delegation<span class="token punctuation">]</span><span class="token punctuation">.</span>vesting_shares<span class="token operator">+</span><span class="token string">', –º–æ–∂–Ω–æ –æ—Ç–æ–∑–≤–∞—Ç—å –ø–æ—Å–ª–µ '</span><span class="token operator">+</span>response<span class="token punctuation">[</span>delegation<span class="token punctuation">]</span><span class="token punctuation">.</span>min_delegation_time<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ–ª–∏ –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> start_from<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–ø–æ–∏—Å–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ–ª–∏ –ø–æ—Å–ª–µ –¥–∞—Ç—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω–æ–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO</span>
<span class="token keyword">var</span> count<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">;</span>
viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getExpiringVestingDelegations</span><span class="token punctuation">(</span>account_login<span class="token punctuation">,</span>start_from<span class="token punctuation">,</span>count<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">==</span>response<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–π –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ–ª–µ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span>delegation <span class="token keyword">in</span> response<span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">[</span>delegation<span class="token punctuation">]</span><span class="token punctuation">.</span>vesting_shares<span class="token operator">+</span><span class="token string">' –≤–µ—Ä–Ω–µ—Ç—Å—è '</span><span class="token operator">+</span>response<span class="token punctuation">[</span>delegation<span class="token punctuation">]</span><span class="token punctuation">.</span>expiration<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="custom-–æ–ø–µ—Ä–∞—Ü–∏–∏"><a href="#custom-–æ–ø–µ—Ä–∞—Ü–∏–∏" class="header-anchor">#</a> Custom –æ–ø–µ—Ä–∞—Ü–∏–∏</h3> <p>–ö–æ–≥–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ —Å–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –±–ª–æ–∫—á–µ–π–Ω, —Å–¥–µ–ª–∞—Ç—å –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (dApp), –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –±–ª–æ–∫–∏ –∏ —É—á–∏—Ç—ã–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Å–µ—Ç–∏ ‚Äî –æ–Ω–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å custom –æ–ø–µ—Ä–∞—Ü–∏–∏. Custom –æ–ø–µ—Ä–∞—Ü–∏—è –∏–º–µ–µ—Ç –≥–∏–±–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:</p> <ul><li><strong>required_active_auths</strong> ‚Äî –º–∞—Å—Å–∏–≤ –∞–∫–∫–∞—É–Ω—Ç–æ–≤, —á—å–∏ –ø–æ–¥–ø–∏—Å–∏ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è;</li> <li><strong>required_regular_auths</strong> ‚Äî –º–∞—Å—Å–∏–≤ –∞–∫–∫–∞—É–Ω—Ç–æ–≤, —á—å–∏ –ø–æ–¥–ø–∏—Å–∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è;</li> <li><strong>custom_name</strong> ‚Äî –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ custom –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–∞–º–∏ —Ä–µ—à–∞—é—Ç –∫–∞–∫–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è);</li> <li><strong>custom_json</strong> ‚Äî –ª—é–±–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ;</li></ul> <p>–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç —Å–∞–º–∏ –ø—Ä–∏–¥—É–º–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ—Ç–æ–∫–æ–ª –∫–æ–º–∞–Ω–¥ –∏ –∏—Ö —É—á–µ—Ç —á–µ—Ä–µ–∑ custom –æ–ø–µ—Ä–∞—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞—Ä—Ç–æ—á–Ω–∞—è –∏–≥—Ä–∞, –º–µ–¥–∏–∞-–±–ª–æ–≥–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ –∏–ª–∏ —Ä–∞–±–æ—Ç–∞ —Å —Ä–µ–∫–ª–∞–º–Ω—ã–º–∏ –±–ª–æ–∫–∞–º–∏.</p> <p>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è custom –æ–ø–µ—Ä–∞—Ü–∏–∏:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> required_active_auths<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> required_regular_auths<span class="token operator">=</span><span class="token punctuation">[</span>account_login<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> private_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –Ω—É–∂–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–æ—Å—Ç—É–ø–∞ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ regular)</span>
<span class="token keyword">var</span> custom_name<span class="token operator">=</span><span class="token string">'file_app'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> custom_json<span class="token operator">=</span><span class="token string">'{&quot;directory&quot;:&quot;/photos/2020/viz_conf/&quot;,&quot;filename&quot;:&quot;moscow_camp.jpg&quot;,&quot;url&quot;:&quot;https://...&quot;}'</span><span class="token punctuation">;</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span>private_key<span class="token punctuation">,</span>required_active_auths<span class="token punctuation">,</span>required_regular_auths<span class="token punctuation">,</span>custom_name<span class="token punctuation">,</span>custom_json<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–ø—Ä–æ–¥–∞–∂–∞-–∞–∫–∫–∞—É–Ω—Ç–∞"><a href="#–ø—Ä–æ–¥–∞–∂–∞-–∞–∫–∫–∞—É–Ω—Ç–∞" class="header-anchor">#</a> –ü—Ä–æ–¥–∞–∂–∞ –∞–∫–∫–∞—É–Ω—Ç–∞</h3> <p>–í–ª–∞–¥–µ–ª–µ—Ü –∞–∫–∫–∞—É–Ω—Ç–∞ –º–æ–∂–µ—Ç –≤—ã—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –Ω–∞ –ø—Ä–æ–¥–∞–∂—É –∏—Å–ø–æ–ª—å–∑—É—è master –¥–æ—Å—Ç—É–ø:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> master_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> seller_login<span class="token operator">=</span><span class="token string">'reseller'</span><span class="token punctuation">;</span><span class="token comment">//–ª–æ–≥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç–∞ –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∏—Ç —Ç–æ–∫–µ–Ω—ã –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–¥–∞–∂–µ –∞–∫–∫–∞—É–Ω—Ç–∞</span>
<span class="token keyword">var</span> fixed_price_amount<span class="token operator">=</span><span class="token string">'10000.000 VIZ'</span><span class="token punctuation">;</span><span class="token comment">//—Ü–µ–Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–∞</span>
<span class="token keyword">var</span> on_sale<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//–≤—ã—Å—Ç–∞–≤–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ –ø—Ä–æ–¥–∞–∂—É (–µ—Å–ª–∏ false, —Ç–æ —Å–Ω—è—Ç—å —Å –ø—Ä–æ–¥–∞–∂–∏)</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">setAccountPrice</span><span class="token punctuation">(</span>master_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>seller_login<span class="token punctuation">,</span>fixed_price_amount<span class="token punctuation">,</span>on_sale<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –≤—ã—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∂—É —Å–∞–±–∞–∫–∫–∞—É–Ω—Ç—ã (<code>*.login</code>):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> master_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> seller_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span><span class="token comment">//–ª–æ–≥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç–∞ –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∏—Ç —Ç–æ–∫–µ–Ω—ã –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–¥–∞–∂–µ –∞–∫–∫–∞—É–Ω—Ç–∞</span>
<span class="token keyword">var</span> fixed_price_amount<span class="token operator">=</span><span class="token string">'1000.000 VIZ'</span><span class="token punctuation">;</span><span class="token comment">//—Ü–µ–Ω–∞ —Å–∞–±–∞–∫–∫–∞—É–Ω—Ç–∞</span>
<span class="token keyword">var</span> on_sale<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//–≤—ã—Å—Ç–∞–≤–∏—Ç—å —Å–∞–±–∞–∫–∫–∞—É–Ω—Ç—ã –Ω–∞ –ø—Ä–æ–¥–∞–∂—É (–µ—Å–ª–∏ false, —Ç–æ —Å–Ω—è—Ç—å —Å –ø—Ä–æ–¥–∞–∂–∏)</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">setSubaccountPrice</span><span class="token punctuation">(</span>master_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>seller_login<span class="token punctuation">,</span>fixed_price_amount<span class="token punctuation">,</span>on_sale<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ö—É–ø–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç –∏–ª–∏ —Å–∞–±–∞–∫–∫–∞—É–Ω—Ç –º–æ–∂–Ω–æ –æ–ø–µ—Ä–∞—Ü–∏–µ–π <code>buy_account</code>, —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∫—É–ø–∫–∏ –∏ –ø—Ä–æ–≤–µ–¥–µ—Ç —Å–¥–µ–ª–∫—É –µ—Å–ª–∏ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'buyer'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> subaccount_login<span class="token operator">=</span><span class="token string">'enjoy.test'</span><span class="token punctuation">;</span><span class="token comment">//–ø–æ–∫—É–ø–∫–∞ —Å–∞–±–∞–∫–∫–∞—É–Ω—Ç–∞ —É –∞–∫–∫–∞—É–Ω—Ç–∞ test</span>
<span class="token keyword">var</span> account_offer_price<span class="token operator">=</span><span class="token string">'1000.000 VIZ'</span><span class="token punctuation">;</span><span class="token comment">//—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (–µ—Å–ª–∏ —Ü–µ–Ω–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è, –±–ª–æ–∫—á–µ–π–Ω –æ—Ç–∫–∞–∂–µ—Ç –≤ –æ–ø–µ—Ä–∞—Ü–∏–∏)</span>
<span class="token keyword">var</span> private_key<span class="token operator">=</span><span class="token function">pass_gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> public_key<span class="token operator">=</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">wifToPublic</span><span class="token punctuation">(</span>private_key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–ø–æ–ª—É—á–∞–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ</span>
<span class="token keyword">var</span> token_to_shares<span class="token operator">=</span><span class="token string">'5.000 VIZ'</span><span class="token punctuation">;</span><span class="token comment">//–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –¥–æ–ª—é –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">buyAccount</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>subaccount_login<span class="token punctuation">,</span>account_offer_price<span class="token punctuation">,</span>public_key<span class="token punctuation">,</span>token_to_shares<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'–ü–æ–∫—É–ø–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ '</span><span class="token operator">+</span>account_login<span class="token operator">+</span><span class="token string">' –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –æ–±—â–∏–π –∫–ª—é—á '</span><span class="token operator">+</span>private_key<span class="token punctuation">)</span><span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="—Ç—Ä–µ—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ-escrow-—Å–¥–µ–ª–∫–∏"><a href="#—Ç—Ä–µ—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ-escrow-—Å–¥–µ–ª–∫–∏" class="header-anchor">#</a> –¢—Ä–µ—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ Escrow —Å–¥–µ–ª–∫–∏</h3> <p>–¢—Ä–µ—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Å–¥–µ–ª–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π –≥–∞—Ä–∞–Ω—Ç–æ–º (<code>agent</code>). –ü–æ–ª—É—á–∞—Ç–µ–ª—å –∏ –≥–∞—Ä–∞–Ω—Ç –¥–æ–ª–∂–Ω—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –Ω–∞—á–∞–ª–æ —Å–¥–µ–ª–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–µ–π <code>escrow_approve</code> (–≥–∞—Ä–∞–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏—é –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ), –∏–Ω–∞—á–µ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –¥–∞—Ç—ã –¥–µ–¥–ª–∞–π–Ω–∞ —Ä–∞—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (<code>ratification_deadline</code>) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–æ–∑–≤—Ä–∞—Ç –≤—Å–µ—Ö —Ç–æ–∫–µ–Ω–æ–≤ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É —Å–¥–µ–ª–∫–∏ (<a href="https://github.com/VIZ-Blockchain/viz-cpp-node/blob/master/libraries/chain/database.cpp#L2498" target="_blank" rel="noopener noreferrer">–º–µ—Ç–æ–¥ <code>expire_escrow_ratification</code> –≤ —Ñ–∞–π–ª–µ database.cpp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</p> <p>–ï—Å–ª–∏ –Ω–∞—Å—Ç—É–ø–∞–µ—Ç –º–æ–º–µ–Ω—Ç —Å–ø–æ—Ä–∞, —Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –∏–ª–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –º–æ–≥—É—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–±–∏—Ä–∞—Ç–µ–ª—å—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–µ–π <code>escrow_dispute</code>, –ø–æ—Å–ª–µ —á–µ–≥–æ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è –ø–æ —Å–¥–µ–ª–∫–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≥–∞—Ä–∞–Ω—Ç—É (–∏–º–µ–Ω–Ω–æ –æ–Ω —Ä–µ—à–∞–µ—Ç –∫—Ç–æ –∏ —Å–∫–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ–ª—É—á–∏—Ç). –ï—Å–ª–∏ —Å–¥–µ–ª–∫–∞ –ø–æ–≤–∏—Å–ª–∞ –∏ –¥–æ–ª–≥–æ–µ –≤—Ä–µ–º—è –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è ‚Äî –¥–æ–≥–æ–≤–æ—Ä –∏—Å—Ç–µ–∫–∞–µ—Ç (<code>escrow_expiration</code>) –∏ –≤—Å–µ–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–∏–±–æ –∞–≥–µ–Ω—Ç (–µ—Å–ª–∏ –±—ã–ª –æ—Ç–∫—Ä—ã—Ç –¥–∏—Å–ø—É—Ç), –ª–∏–±–æ –ª—é–±–∞—è –∏–∑ —Å—Ç–æ—Ä–æ–Ω —Å–¥–µ–ª–∫–∏.</p> <p>–°–æ–∑–¥–∞–Ω–∏–µ escrow –ø–µ—Ä–µ–≤–æ–¥–∞:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> receiver_login<span class="token operator">=</span><span class="token string">'receiver'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> token_amount<span class="token operator">=</span><span class="token string">'100.000 VIZ'</span><span class="token punctuation">;</span><span class="token comment">//–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤</span>
<span class="token keyword">var</span> escrow_id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//–Ω–æ–º–µ—Ä escrow –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ (uint32)</span>
<span class="token keyword">var</span> agent_login<span class="token operator">=</span><span class="token string">'agent'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> fee<span class="token operator">=</span><span class="token string">'10.000 VIZ'</span><span class="token punctuation">;</span><span class="token comment">//–∫–æ–º–∏—Å—Å–∏—è –≥–∞—Ä–∞–Ω—Ç–∞</span>
<span class="token keyword">var</span> json_metadata<span class="token operator">=</span><span class="token string">'{}'</span><span class="token punctuation">;</span><span class="token comment">//–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ json</span>
<span class="token keyword">var</span> ratification_deadline<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–¥–∞—Ç–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–¥–µ–ª–∫–∏ –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å—Ä–µ–¥—Å—Ç–≤ –µ—Å–ª–∏ –≥–∞—Ä–∞–Ω—Ç –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∏ —É—á–∞—Å—Ç–∏–µ –≤ —Å–¥–µ–ª–∫–µ (–¥–µ–¥–ª–∞–π–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO –≤–∏–¥–∞ 2019-10-17T13:30:18)</span>
<span class="token keyword">var</span> escrow_expiration<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è –ø–æ —Å–¥–µ–ª–∫–µ, –ø–æ—Å–ª–µ —á–µ–≥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å —Å–ø–æ—Ä (–¥–µ–¥–ª–∞–π–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO –≤–∏–¥–∞ 2019-10-17T13:30:18)</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">escrowTransfer</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>receiver_login<span class="token punctuation">,</span>token_amount<span class="token punctuation">,</span>escrow_id<span class="token punctuation">,</span>agent_login<span class="token punctuation">,</span>fee<span class="token punctuation">,</span>json_metadata<span class="token punctuation">,</span>ratification_deadline<span class="token punctuation">,</span>escrow_expiration<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—á–∞—Å—Ç–∏–µ –≤ —Å–¥–µ–ª–∫–µ –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–º —É—Å–ª–æ–≤–∏—è–º (—Å–≤–æ–µ —É—á–∞—Å—Ç–∏–µ –¥–æ–ª–∂–Ω—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≥–∞—Ä–∞–Ω—Ç –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–µ–π <code>escrow_approve</code>):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> receiver_login<span class="token operator">=</span><span class="token string">'receiver'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> agent_login<span class="token operator">=</span><span class="token string">'agent'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> escrow_id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//–Ω–æ–º–µ—Ä escrow –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ (uint32)</span>

<span class="token keyword">var</span> who<span class="token operator">=</span>agent_login<span class="token punctuation">;</span><span class="token comment">//–∫—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–≤–æ–µ —É—á–∞—Å—Ç–∏–µ</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–∫–ª—é—á –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–π —Å—Ç–æ—Ä–æ–Ω—ã (who)</span>

<span class="token keyword">var</span> approve<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//false –≤ —Å–ª—É—á–∞–µ –æ—Ç–∫–∞–∑–∞ –æ—Ç —É—á–∞—Å—Ç–∏—è –≤ —Å–¥–µ–ª–∫–µ</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">escrowApprove</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>receiver_login<span class="token punctuation">,</span>agent_login<span class="token punctuation">,</span>who<span class="token punctuation">,</span>escrow_id<span class="token punctuation">,</span>approve<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –¥–∏—Å–ø—É—Ç–∞ (–æ—Ç–∫—Ä—ã—Ç—å —Å–ø–æ—Ä –ø–æ —Å–¥–µ–ª–∫–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –∏–ª–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–µ–π <code>escrow_dispute</code>):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> receiver_login<span class="token operator">=</span><span class="token string">'receiver'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> agent_login<span class="token operator">=</span><span class="token string">'agent'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> escrow_id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//–Ω–æ–º–µ—Ä escrow –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ (uint32)</span>


<span class="token keyword">var</span> who<span class="token operator">=</span>receiver_login<span class="token punctuation">;</span><span class="token comment">//–∫—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–≤–æ–µ —É—á–∞—Å—Ç–∏–µ</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–∫–ª—é—á –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–π —Å—Ç–æ—Ä–æ–Ω—ã (who)</span>

viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">escrowDispute</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>receiver_login<span class="token punctuation">,</span>agent_login<span class="token punctuation">,</span>who<span class="token punctuation">,</span>escrow_id<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–û—Ç–ø—É—Å—Ç–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ (–æ–ø–µ—Ä–∞—Ü–∏—è <code>escrow_release</code>):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> receiver_login<span class="token operator">=</span><span class="token string">'receiver'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> agent_login<span class="token operator">=</span><span class="token string">'agent'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> escrow_id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//–Ω–æ–º–µ—Ä escrow –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ (uint32)</span>
<span class="token keyword">var</span> token_amount<span class="token operator">=</span><span class="token string">'100.000 VIZ'</span><span class="token punctuation">;</span><span class="token comment">//–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤</span>

<span class="token keyword">var</span> who<span class="token operator">=</span>receiver_login<span class="token punctuation">;</span><span class="token comment">//–∫—Ç–æ —Ä–µ—à–∏–ª –æ—Ç–ø—É—Å—Ç–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ (–µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç –¥–∏—Å–ø—É—Ç, —Ç–æ —Ç–æ–ª—å–∫–æ –≥–∞—Ä–∞–Ω—Ç —Ä–µ—à–∞–µ—Ç –∫–æ–º—É –∏ —Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏)</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–∫–ª—é—á –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ (who)</span>
<span class="token keyword">var</span> receiver<span class="token operator">=</span>account_login<span class="token punctuation">;</span><span class="token comment">//–ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º —Å—Ä–µ–¥—Å—Ç–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –¥—Ä—É–≥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —Å–¥–µ–ª–∫–∏ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ —Å–¥–µ–ª–∫–∏, –∏–Ω–∞—á–µ ‚Äî –ª—é–±–∞—è –∏–∑ —Å—Ç–æ—Ä–æ–Ω —Å–¥–µ–ª–∫–∏</span>

viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">escrowRelease</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>receiver_login<span class="token punctuation">,</span>agent_login<span class="token punctuation">,</span>who<span class="token punctuation">,</span>receiver<span class="token punctuation">,</span>escrow_id<span class="token punctuation">,</span>token_amount<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± escrow, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å API –∑–∞–ø—Ä–æ—Å <code>get_escrow</code> –ø–ª–∞–≥–∏–Ω–∞ <code>database_api</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> escrow_id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getEscrow</span><span class="token punctuation">(</span>account_login<span class="token punctuation">,</span>escrow_id<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//–ø–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token comment">//–æ—à–∏–±–∫–∞</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ-–∞–∫–∫–∞—É–Ω—Ç–∞"><a href="#–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ-–∞–∫–∫–∞—É–Ω—Ç–∞" class="header-anchor">#</a> –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞</h3> <p>–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ —Å–æ–∑–¥–∞—Ç–µ–ª—å –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ø–æ–ª–µ –∞–∫–∫–∞—É–Ω—Ç–∞ <code>recovery</code> –∫–∞–∫ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ –ª–∏—Ü–æ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–∫–∫–∞—É–Ω—Ç–∞, –≤ —Å–ª—É—á–∞–µ –µ–≥–æ –≤–∑–ª–æ–º–∞ –∏ —Å–º–µ–Ω—ã –∫–ª—é—á–µ–π –¥–æ—Å—Ç—É–ø–∞. –ë–ª–æ–∫—á–µ–π–Ω –≤–µ–¥–µ—Ç –∑–∞–ø–∏—Å–∏ –ø–æ —Å–º–µ–Ω–µ –º–∞—Å—Ç–µ—Ä –ø–æ–ª–Ω–æ–º–æ—á–∏–π –∏ —Ö—Ä–∞–Ω–∏—Ç –∏—Ö 30 –¥–Ω–µ–π. –ò–º–µ–Ω–Ω–æ –≤ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ –≤ 30 –¥–Ω–µ–π –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –æ–ø–µ—Ä–∞—Ü–∏–µ–π <code>request_account_recovery</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> recovery_account<span class="token operator">=</span><span class="token string">'escrow'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> account_to_recover<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> private_key<span class="token operator">=</span><span class="token function">pass_gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–ø–µ—Ä–µ–¥–∞–µ–º –≤–ª–∞–¥–µ–ª—å—Ü—É –∞–∫–∫–∞—É–Ω—Ç–∞ –∏–ª–∏ —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞–µ–º —Å –Ω–∏–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–ª—è –º–∞—Å—Ç–µ—Ä –ø–æ–ª–Ω–æ–º–æ—á–∏–π)</span>
<span class="token keyword">var</span> public_key<span class="token operator">=</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">wifToPublic</span><span class="token punctuation">(</span>private_key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–ø–æ–ª—É—á–∞–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ</span>

<span class="token keyword">var</span> new_master_authority<span class="token operator">=</span><span class="token punctuation">{</span>
	<span class="token string-property property">'weight_threshold'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token string-property property">'account_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">'key_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">[</span>public_key<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//–Ω–æ–≤—ã–µ –º–∞—Å—Ç–µ—Ä –ø–æ–ª–Ω–æ–º–æ—á–∏—è</span>
<span class="token keyword">var</span> extensions<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">requestAccountRecovery</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>recovery_account<span class="token punctuation">,</span>account_to_recover<span class="token punctuation">,</span>new_master_authority<span class="token punctuation">,</span>extensions<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–º–µ–Ω—É –¥–æ—Å—Ç—É–ø–æ–≤ —Å–æ–∑–¥–∞–Ω –µ–≥–æ –¥–æ–ª–∂–µ–Ω –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç –æ–ø–µ—Ä–∞—Ü–∏–µ–π <code>recover_account</code>. –í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –Ω–∞–¥–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å —Å—Ä–∞–∑—É –¥–≤—É–º—è –∫–ª—é—á–∞–º–∏ ‚Äî —Å—Ç–∞—Ä—ã–º –∏ –Ω–æ–≤—ã–º –∏–∑ –∑–∞—è–≤–∫–∏ –æ—Ç –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –∏—Å–ø–æ–ª—å–∑—É—è <code>viz.broadcast.send</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> new_master_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–Ω–æ–≤—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–∞—Å—Ç–µ—Ä –∫–ª—é—á</span>
<span class="token keyword">var</span> new_master_public_key<span class="token operator">=</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">wifToPublic</span><span class="token punctuation">(</span>new_master_key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –º–∞—Å—Ç–µ—Ä –∫–ª—é—á–∞ (—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω —Å –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º –∞–∫–∫–∞—É–Ω—Ç–æ–º)</span>
<span class="token keyword">var</span> new_master_authority<span class="token operator">=</span><span class="token punctuation">{</span>
	<span class="token string-property property">'weight_threshold'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token string-property property">'account_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">'key_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">[</span>new_master_public_key<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//–Ω–æ–≤—ã–µ –º–∞—Å—Ç–µ—Ä –ø–æ–ª–Ω–æ–º–æ—á–∏—è</span>

<span class="token keyword">var</span> recent_master_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//—Å—Ç–∞—Ä—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–∞—Å—Ç–µ—Ä –∫–ª—é—á –¥–ª—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</span>
<span class="token keyword">var</span> recent_master_public_key<span class="token operator">=</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">wifToPublic</span><span class="token punctuation">(</span>recent_master_key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//—Å—Ç–∞—Ä—ã–π –ø—É–±–ª–∏—á–Ω—ã–π –º–∞—Å—Ç–µ—Ä –∫–ª—é—á</span>
<span class="token keyword">var</span> recent_master_authority<span class="token operator">=</span><span class="token punctuation">{</span>
	<span class="token string-property property">'weight_threshold'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token string-property property">'account_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">'key_auths'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">[</span>recent_master_public_key<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//—Å—Ç–∞—Ä—ã–µ –º–∞—Å—Ç–µ—Ä –ø–æ–ª–Ω–æ–º–æ—á–∏—è –∫–∞–∫ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</span>
<span class="token keyword">var</span> extensions<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è</span>

<span class="token keyword">var</span> operations<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'recover_account'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'account_to_recover'</span><span class="token operator">:</span>account_login<span class="token punctuation">,</span><span class="token string-property property">'new_master_authority'</span><span class="token operator">:</span>new_master_authority<span class="token punctuation">,</span><span class="token string-property property">'recent_master_authority'</span><span class="token operator">:</span>recent_master_authority<span class="token punctuation">,</span><span class="token string-property property">'extensions'</span><span class="token operator">:</span>extensions<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> tx<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string-property property">'extensions'</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>operations<span class="token punctuation">}</span><span class="token punctuation">;</span>

viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>tx<span class="token punctuation">,</span><span class="token punctuation">[</span>recent_master_key<span class="token punctuation">,</span>new_master_key<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ü–æ–º–µ–Ω—è—Ç—å –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –º–æ–∂–Ω–æ –æ–ø–µ—Ä–∞—Ü–∏–µ–π <code>change_recovery_account</code>, –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø—è—Ç —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π (—á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –∞–±—É–∑):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> master_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–º–∞—Å—Ç–µ—Ä –∫–ª—é—á</span>
<span class="token keyword">var</span> new_recovery_account<span class="token operator">=</span><span class="token string">'escrow'</span><span class="token punctuation">;</span><span class="token comment">//–Ω–æ–≤—ã–π –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç</span>
<span class="token keyword">var</span> extensions<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è</span>
viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">changeRecoveryAccount</span><span class="token punctuation">(</span>master_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>new_recovery_account<span class="token punctuation">,</span>extensions<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="—Å–∏—Å—Ç–µ–º–∞-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö-–æ–ø–µ—Ä–∞—Ü–∏–∏-proposal"><a href="#—Å–∏—Å—Ç–µ–º–∞-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö-–æ–ø–µ—Ä–∞—Ü–∏–∏-proposal" class="header-anchor">#</a> –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (proposal)</h3> <p>–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å—É—â–µ—Å—Ç–≤—É–µ—Ç 3 –æ–ø–µ—Ä–∞—Ü–∏–∏: —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ), —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –±–ª–æ–∫—á–µ–π–Ω —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –æ–∂–∏–¥–∞—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç –∏—Ö. –ï—Å–ª–∏ –ø–æ–¥–æ—à–µ–ª —Å—Ä–æ–∫ –∏—Å—Ç–µ—á–µ–Ω–∏—è, —Ç–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ. –°–∏—Å—Ç–µ–º–æ–π –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—É–ª—å—Ç–∏–ø–æ–¥–ø–∏—Å–Ω—ã–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏. –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏—é <code>proposal_create</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á</span>
<span class="token keyword">var</span> title<span class="token operator">=</span><span class="token string">'payments-14'</span><span class="token punctuation">;</span><span class="token comment">//–Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (–∏–≥—Ä–∞–µ—Ç —Ä–æ–ª—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞, –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º)</span>
<span class="token keyword">var</span> memo<span class="token operator">=</span><span class="token string">'–ü–ª–∞—Ç–µ–∂–∏ –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É ‚Ññ14'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> expiration_date<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–¥–∞—Ç–∞ —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–æ–¥–ø–∏—Å–µ–π</span>
expiration_date<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span>expiration_date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–ø–ª—é—Å –¥–µ—Å—è—Ç—å –¥–Ω–µ–π –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞</span>
<span class="token keyword">var</span> expiration_time<span class="token operator">=</span>expiration_date<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'expiration_time'</span><span class="token punctuation">,</span>expiration_time<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> proposed_operations<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
proposed_operations<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">'op'</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'transfer'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">'from'</span><span class="token operator">:</span><span class="token string">'escrow'</span><span class="token punctuation">,</span><span class="token string-property property">'to'</span><span class="token operator">:</span><span class="token string">'test'</span><span class="token punctuation">,</span><span class="token string-property property">'amount'</span><span class="token operator">:</span><span class="token string">'10.000 VIZ'</span><span class="token punctuation">,</span><span class="token string-property property">'memo'</span><span class="token operator">:</span>memo<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
proposed_operations<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">'op'</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'transfer'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">'from'</span><span class="token operator">:</span><span class="token string">'escrow2'</span><span class="token punctuation">,</span><span class="token string-property property">'to'</span><span class="token operator">:</span><span class="token string">'test'</span><span class="token punctuation">,</span><span class="token string-property property">'amount'</span><span class="token operator">:</span><span class="token string">'10.000 VIZ'</span><span class="token punctuation">,</span><span class="token string-property property">'memo'</span><span class="token operator">:</span>memo<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> review_period_date<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>expiration_date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–¥–∞—Ç–∞ –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏—è –ø—Ä–∏–µ–º–∞ –ø–æ–¥–ø–∏—Å–µ–π (–º–∏–Ω—É—Å 10 —Å–µ–∫—É–Ω–¥ –¥–æ –¥–∞—Ç—ã —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏)</span>
<span class="token keyword">var</span> review_period_time<span class="token operator">=</span>review_period_date<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'review_period_time'</span><span class="token punctuation">,</span>review_period_time<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> extensions<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">proposalCreate</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>title<span class="token punctuation">,</span>memo<span class="token punctuation">,</span>expiration_time<span class="token punctuation">,</span>proposed_operations<span class="token punctuation">,</span>review_period_time<span class="token punctuation">,</span>extensions<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö —Å–¥–µ–ª–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å API –∑–∞–ø—Ä–æ—Å <code>get_proposed_transactions</code> –∫ –ø–ª–∞–≥–∏–Ω—É <code>database_api</code> (–±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω –º–∞—Å—Å–∏–≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> looking_account<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> from<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> limit<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
viz<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">getProposedTransactions</span><span class="token punctuation">(</span>looking_account<span class="token punctuation">,</span>from<span class="token punctuation">,</span>limit<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ, –Ω–æ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–º–µ—à–∏–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—â–∏–µ —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª–Ω–æ–º–æ—á–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–ø–µ—Ä–∞—Ü–∏–∏ <code>tranfer</code>, —Ç—Ä–µ–±—É—é—â–∏–µ active –ø–æ–ª–Ω–æ–º–æ—á–∏—è, –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ <code>award</code>, —Ç—Ä–µ–±—É—é—â–∏–µ regular –ø–æ–ª–Ω–æ–º–æ—á–∏—è). –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å—å –Ω—É–∂–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–æ—Å—Ç—É–ø–∞ –º–æ–∂–Ω–æ –æ–ø–µ—Ä–∞—Ü–∏–µ–π <code>proposal_update</code> —É–∫–∞–∑–∞–≤ –ª–æ–≥–∏–Ω –ø–æ–¥–ø–∏—Å–∞–≤—à–µ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ –º–∞—Å—Å–∏–≤–µ –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ —Å–ø–∏—Å–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–≤—à–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ (–¥–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å 4 —Ç–∏–ø–∞ –º–∞—Å—Å–∏–≤–æ–≤: active, master, regular –∏ key –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –∫–ª—é—á–µ–π). –ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–¥–ø–∏—Å–∏ ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –±—É–¥—É—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω—ã (–ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –Ω–µ —É–∫–∞–∑–∞–Ω –ø–µ—Ä–∏–æ–¥ <code>review_period_time</code>), –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –±—É–¥–µ—Ç –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç–∞ –ø—Ä–∏ —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏. –ü—Ä–∏–º–µ—Ä:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'escrow'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á</span>

<span class="token keyword">var</span> proposal_author<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span><span class="token comment">//–∞–≤—Ç–æ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</span>
<span class="token keyword">var</span> proposal_title<span class="token operator">=</span><span class="token string">'payments-14'</span><span class="token punctuation">;</span><span class="token comment">//–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</span>

<span class="token keyword">var</span> active_approvals_to_add<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//—Å–ø–∏—Å–æ–∫ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –ø–æ–¥–ø–∏—Å–∞–≤—à–∏—Ö –¥–∞–Ω–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –∞–∫—Ç–∏–≤–Ω—ã–º —Ç–∏–ø–æ–º –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</span>
<span class="token keyword">var</span> active_approvals_to_remove<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//—Å–ø–∏—Å–æ–∫ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ —Å–ø–∏—Å–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–≤—à–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</span>
<span class="token keyword">var</span> master_approvals_to_add<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> master_approvals_to_remove<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regular_approvals_to_add<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regular_approvals_to_remove<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> key_approvals_to_add<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> key_approvals_to_remove<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> extensions<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

active_approvals_to_add<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>account_login<span class="token punctuation">)</span><span class="token punctuation">;</span>

viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">proposalUpdate</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>proposal_author<span class="token punctuation">,</span>proposal_title<span class="token punctuation">,</span>active_approvals_to_add<span class="token punctuation">,</span>active_approvals_to_remove<span class="token punctuation">,</span>master_approvals_to_add<span class="token punctuation">,</span>master_approvals_to_remove<span class="token punctuation">,</span>regular_approvals_to_add<span class="token punctuation">,</span>regular_approvals_to_remove<span class="token punctuation">,</span>key_approvals_to_add<span class="token punctuation">,</span>key_approvals_to_remove<span class="token punctuation">,</span>extensions<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –∑–∞—è–≤–∏—Ç–µ–ª—å –∏–ª–∏ –ª—é–±–æ–π —É—á–∞—Å—Ç–Ω–∏–∫, —á—å—è –ø–æ–¥–ø–∏—Å—å —Ç—Ä–µ–±—É–µ—Ç—Å—è. –î–ª—è —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é <code>proposal_delete</code> –ø–æ–¥–ø–∏—Å–∞–≤ –µ—ë –∞–∫—Ç–∏–≤–Ω—ã–º –∫–ª—é—á–æ–º:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> account_login<span class="token operator">=</span><span class="token string">'escrow2'</span><span class="token punctuation">;</span><span class="token comment">//—É—á–∞—Å—Ç–Ω–∏–∫ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</span>
<span class="token keyword">var</span> active_key<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span><span class="token comment">//–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á</span>

<span class="token keyword">var</span> proposal_author<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span><span class="token comment">//–∞–≤—Ç–æ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</span>
<span class="token keyword">var</span> proposal_title<span class="token operator">=</span><span class="token string">'payments-14'</span><span class="token punctuation">;</span><span class="token comment">//–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</span>

<span class="token keyword">var</span> extensions<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">proposalDelete</span><span class="token punctuation">(</span>active_key<span class="token punctuation">,</span>proposal_author<span class="token punctuation">,</span>proposal_title<span class="token punctuation">,</span>account_login<span class="token punctuation">,</span>extensions<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–≥—Ä–∞–¥—ã —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Ç–µ–º –∂–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –ø–æ–¥–ø–∏—Å–∞–≤—à–∏–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –∞–∫—Ç–∏–≤–Ω—ã–º –∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –∫–ª—é—á–æ–º:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> expiration_date<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//+20 —Å–µ–∫—É–Ω–¥ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞</span>
<span class="token keyword">var</span> expiration_time<span class="token operator">=</span>expiration_date<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO</span>
<span class="token keyword">var</span> review_period_date<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>expiration_date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–¥–∞—Ç–∞ –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏—è –ø—Ä–∏–µ–º–∞ –ø–æ–¥–ø–∏—Å–µ–π (–º–∏–Ω—É—Å 10 —Å–µ–∫—É–Ω–¥ –æ—Ç –¥–∞—Ç—ã —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏)</span>
<span class="token keyword">var</span> review_period_time<span class="token operator">=</span>review_period_date<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO</span>

<span class="token keyword">var</span> login<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> active_wif<span class="token operator">=</span><span class="token string">'5K...'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regular_wif<span class="token operator">=</span><span class="token string">'5J...'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> target<span class="token operator">=</span><span class="token string">'committee'</span><span class="token punctuation">;</span><span class="token comment">//—Ü–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è</span>
<span class="token keyword">var</span> energy<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">;</span><span class="token comment">//2%</span>
<span class="token keyword">var</span> memo<span class="token operator">=</span><span class="token string">'–æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è —á–µ—Ä–µ–∑ proposal'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> regular_public_wif <span class="token operator">=</span> viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">wifToPublic</span><span class="token punctuation">(</span>regular_wif<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//–¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ key_approvals_to_add —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏—é proposal_update</span>

<span class="token keyword">const</span> operations <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">[</span><span class="token string">&quot;proposal_create&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
	<span class="token string-property property">&quot;author&quot;</span><span class="token operator">:</span> login<span class="token punctuation">,</span>
	<span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">'proposal-award'</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;memo&quot;</span><span class="token operator">:</span> login <span class="token operator">+</span> <span class="token string">'-award'</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;expiration_time&quot;</span><span class="token operator">:</span> expiration_time<span class="token punctuation">,</span>
	<span class="token string-property property">&quot;proposed_operations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token punctuation">{</span><span class="token string-property property">&quot;op&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'award'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">'initiator'</span><span class="token operator">:</span>login<span class="token punctuation">,</span><span class="token string-property property">'receiver'</span><span class="token operator">:</span>target<span class="token punctuation">,</span><span class="token string-property property">'energy'</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token string-property property">'custom_sequence'</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string-property property">'memo'</span><span class="token operator">:</span>memo<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;review_period_time&quot;</span><span class="token operator">:</span> review_period_time<span class="token punctuation">,</span>
	<span class="token string-property property">&quot;extensions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token string">&quot;proposal_update&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
	<span class="token string-property property">&quot;author&quot;</span><span class="token operator">:</span> login<span class="token punctuation">,</span>
	<span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">'proposal-award'</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;active_approvals_to_add&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;active_approvals_to_remove&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;owner_approvals_to_add&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;owner_approvals_to_remove&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;posting_approvals_to_add&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;posting_approvals_to_remove&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;key_approvals_to_add&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>regular_public_wif<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;key_approvals_to_remove&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;extensions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

viz<span class="token punctuation">.</span>broadcast<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extensions</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>operations<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>active_wif<span class="token punctuation">,</span>regular_wif<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="–ø–æ–¥–ø–∏—Å—å-–¥–∞–Ω–Ω—ã—Ö-—Å-–ø–æ–º–æ—â—å—é-–ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ-–∫–ª—é—á–∞-–∏-–ø—Ä–æ–≤–µ—Ä–∫–∞-–ø–æ–¥–ø–∏—Å–∏-—Å-–ø–æ–º–æ—â—å—é-–ø—É–±–ª–∏—á–Ω–æ–≥–æ"><a href="#–ø–æ–¥–ø–∏—Å—å-–¥–∞–Ω–Ω—ã—Ö-—Å-–ø–æ–º–æ—â—å—é-–ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ-–∫–ª—é—á–∞-–∏-–ø—Ä–æ–≤–µ—Ä–∫–∞-–ø–æ–¥–ø–∏—Å–∏-—Å-–ø–æ–º–æ—â—å—é-–ø—É–±–ª–∏—á–Ω–æ–≥–æ" class="header-anchor">#</a> –ü–æ–¥–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ —Å –ø–æ–º–æ—â—å—é –ø—É–±–ª–∏—á–Ω–æ–≥–æ</h2> <p>–ß—Ç–æ–±—ã –ø–æ–¥–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º (–º–µ—Ç–æ–¥ <code>viz.auth.signature.sign</code>, –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–∞–Ω–æ–Ω–∏—á–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å nonce, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø–æ–¥–ø–∏—Å—å) –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å—å –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º (–º–µ—Ç–æ–¥ <code>viz.auth.signature.verifyData</code>), –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ <code>viz-js-lib</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> private_key<span class="token operator">=</span><span class="token string">'5KRLZitDd5c9uZzDgTMF4se4eVewENtZ29GbCuKwbT3msRbtLgi'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> public_key<span class="token operator">=</span><span class="token string">'VIZ6LWhhUzKmYM5VcxtC2FpEjzr71imfb7DeGA9yodeqnvtP2SYjA'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> invalid_public_key<span class="token operator">=</span><span class="token string">'VIZ65kiW3JsxsF7NCabAuSJUk8Efhx5PW6cbgSS5uuZpbkSTpSjn6'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> data<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span><span class="token string">&quot;data signature check!&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">nonce</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> nonce<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> data_with_nonce<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> signature<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">auth_signature_check</span><span class="token punctuation">(</span><span class="token parameter">hex</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–∞–Ω–æ–Ω–∏—á–Ω–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∏</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">'1f'</span><span class="token operator">==</span>hex<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">auth_signature_check</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	data<span class="token punctuation">.</span>nonce<span class="token operator">=</span>nonce<span class="token punctuation">;</span>
	data_with_nonce<span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	signature<span class="token operator">=</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>signature<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>data_with_nonce<span class="token punctuation">,</span>private_key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	nonce<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'data with nonce'</span><span class="token punctuation">,</span>data_with_nonce<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'signature'</span><span class="token punctuation">,</span>signature<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'check by public_key'</span><span class="token punctuation">,</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>signature<span class="token punctuation">.</span><span class="token function">verifyData</span><span class="token punctuation">(</span>data_with_nonce<span class="token punctuation">,</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>signature<span class="token punctuation">.</span><span class="token function">fromHex</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span><span class="token punctuation">,</span>public_key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'check by invalid_public_key'</span><span class="token punctuation">,</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>signature<span class="token punctuation">.</span><span class="token function">verifyData</span><span class="token punctuation">(</span>data_with_nonce<span class="token punctuation">,</span>viz<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>signature<span class="token punctuation">.</span><span class="token function">fromHex</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span><span class="token punctuation">,</span>invalid_public_key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="js-–∑–∞–ø—Ä–æ—Å—ã-–∫-–ø—É–±–ª–∏—á–Ω–æ–∏-–Ω–æ–¥–µ-viz-–±–µ–∑-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏"><a href="#js-–∑–∞–ø—Ä–æ—Å—ã-–∫-–ø—É–±–ª–∏—á–Ω–æ–∏-–Ω–æ–¥–µ-viz-–±–µ–∑-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏" class="header-anchor">#</a> js –∑–∞–ø—Ä–æ—Å—ã –∫ –ø—É–±–ª–∏—á–Ω–æ–π –Ω–æ–¥–µ VIZ –±–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏</h2> <p>–ï—Å–ª–∏ –≤–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è –∏ –ø–æ–¥–ø–∏—Å—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, —Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–ª—è json-rpc –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ js.</p> <p>–ü—Ä–∏–º–µ—Ä –¥–ª—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> api_gate<span class="token operator">=</span><span class="token string">'wss://solox.world/ws'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> latency_start<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> latency<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span>api_gate<span class="token punctuation">)</span><span class="token punctuation">;</span>
socket<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	latency<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> latency_start<span class="token punctuation">;</span>
	<span class="token keyword">let</span> json<span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
socket<span class="token punctuation">.</span><span class="token function-variable function">onopen</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'{&quot;id&quot;:1,&quot;method&quot;:&quot;call&quot;,&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;params&quot;:[&quot;database_api&quot;,&quot;get_dynamic_global_properties&quot;,[]]}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>–ü—Ä–∏–º–µ—Ä –¥–ª—è HTTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> api_gate<span class="token operator">=</span><span class="token string">'https://viz.lexa.host/'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> latency_start<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> latency<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">overrideMimeType</span><span class="token punctuation">(</span><span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span>api_gate<span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'accept'</span><span class="token punctuation">,</span><span class="token string">'application/json, text/plain, */*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span><span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">==</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">&amp;&amp;</span> <span class="token number">200</span><span class="token operator">==</span>xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">{</span>
		latency<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> latency_start<span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">let</span> json<span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'{&quot;id&quot;:1,&quot;method&quot;:&quot;call&quot;,&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;params&quot;:[&quot;database_api&quot;,&quot;get_dynamic_global_properties&quot;,[]]}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/viz-cx/docs.viz.cx/edit/master/docs/ru/cookbook/code-examples.md" target="_blank" rel="noopener noreferrer">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/ru/cookbook/libraries.html" class="prev">
        –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å VIZ
      </a></span> <span class="next"><a href="/ru/cookbook/transaction-formatting.html">
        –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.b39bded2.js" defer></script><script src="/assets/js/2.5ba55769.js" defer></script><script src="/assets/js/21.0dfe603c.js" defer></script><script src="/assets/js/3.eb6b60a6.js" defer></script>
  </body>
</html>
